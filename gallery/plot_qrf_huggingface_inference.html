
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using a Trained QRF Model via Hugging Face Hub &#8212; quantile-forest 1.4.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/altair-plot.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/gallery.css?v=8f271e45" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9172181d"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=ccdb6887"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.20.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'gallery/plot_qrf_huggingface_inference';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.4.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/quantile-forest-logo.png" class="logo__image only-light" alt="quantile-forest 1.4.0 documentation - Home"/>
    <img src="../_static/quantile-forest-logo-white.png" class="logo__image only-dark pst-js-only" alt="quantile-forest 1.4.0 documentation - Home"/>
  
  
</a></div>
    
      <div class="navbar-item"><a class="navbar-brand" href="../index.html">
<p class="title">quantile-forest</p>
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started/installation.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/introduction.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../releases/changes.html">
    Release Notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/zillow/quantile-forest" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started/installation.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/introduction.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../releases/changes.html">
    Release Notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/zillow/quantile-forest" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Using a Trained QRF Model via Hugging Face Hub</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="using-a-trained-qrf-model-via-hugging-face-hub">
<span id="gallery-plot-qrf-huggingface-inference"></span><h1>Using a Trained QRF Model via Hugging Face Hub<a class="headerlink" href="#using-a-trained-qrf-model-via-hugging-face-hub" title="Link to this heading">#</a></h1>
<p>This example demonstrates how to download a trained quantile regression forest
(QRF) model from Hugging Face Hub and use it to estimate quantiles. In this
scenario, a QRF has been trained with default parameters on the California
Housing dataset using k-fold cross-validation and uploaded to Hugging Face
Hub. The model is downloaded and used to perform inference across multiple
quantiles for each sample in the dataset. The predictions are aggregated by
county based on the latitude and longitude of each sample and visualized.
The trained model is available on Hugging Face Hub
<a class="reference external" href="https://huggingface.co/quantile-forest/california-housing-example">here</a>.</p>

<div id="plot_qrf_huggingface_inference-rst-altair-plot-0">
<script>
  // embed when document is loaded, to ensure vega library is available
  // this works on all modern browsers, except IE8 and older
  document.addEventListener("DOMContentLoaded", function(event) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-052abaaac98f46b11fe9fd28c859c4d1"}, "mark": {"type": "geoshape", "stroke": "black", "strokeWidth": 0.5}, "encoding": {"color": {"field": "value", "scale": {"domain": [14999.000000000002, 500000.99999999994], "scheme": "lightgreyred"}, "title": "Prediction", "type": "quantitative"}, "tooltip": [{"field": "county_fips", "title": "County FIPS", "type": "nominal"}, {"field": "Population", "format": ",.0f", "title": "Population", "type": "nominal"}, {"field": "value", "format": "$,.0f", "title": "Predicted Value", "type": "quantitative"}]}, "height": 650, "params": [{"name": "quantile", "bind": {"input": "range", "max": 1, "min": 0, "name": "Predicted Quantile: ", "step": 0.05}, "value": 0.5}], "projection": {"type": "mercator"}, "title": "Quantile Predictions on the California Housing Dataset by County", "transform": [{"calculate": "'q_' + quantile", "as": "quantile_col"}, {"calculate": "datum[datum.quantile_col]", "as": "value"}], "width": 650, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-052abaaac98f46b11fe9fd28c859c4d1": [{"county_fips": 6093, "Latitude": 41.78, "Longitude": -121.62, "Population": 43531.0, "q_0": 45594.400151616086, "q_0.05": 55993.019066871886, "q_0.1": 59535.77400013783, "q_0.15": 61787.65013438699, "q_0.2": 63721.08336587719, "q_0.25": 66021.36465966783, "q_0.3": 68808.96257839241, "q_0.35": 70924.16105763709, "q_0.4": 72916.03225287727, "q_0.45": 75046.1858215984, "q_0.5": 77182.16902896787, "q_0.55": 79808.33980381797, "q_0.6": 82072.78950632882, "q_0.65": 84690.24143713675, "q_0.7": 87603.6268406423, "q_0.75": 91252.34890078336, "q_0.8": 96136.87716799522, "q_0.85": 101787.4736394753, "q_0.9": 108640.12450897064, "q_0.95": 118238.61857067375, "q_1": 162449.40387310192, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.2893322740011, 42.00798725405221], [-121.44584816215905, 41.99670703014216], [-121.44584816215905, 41.183456601579636], [-122.50110062548484, 41.18291944806011], [-122.48315415502012, 41.320430749058794], [-122.57647580143669, 41.368237412296615], [-122.80260132929222, 41.20279412828258], [-122.88515509342994, 41.20494274236068], [-122.97488744575357, 41.11201518348267], [-122.9138694461735, 40.99706433030408], [-123.03949473942657, 41.004584479577446], [-123.11128062128547, 41.07548874415489], [-123.24049520863149, 41.07548874415489], [-123.40919203099989, 41.179696526942955], [-123.47738861876584, 41.36770025877709], [-123.66044261750604, 41.3822034038043], [-123.6101925002048, 41.461702124694156], [-123.69274626434253, 41.55194391597455], [-123.66044261750604, 41.725981656301], [-123.70351414662137, 41.81890921517902], [-123.56353167699652, 41.90324231774461], [-123.52046014788118, 42.001004258298366], [-123.22972732635264, 42.003152872376475], [-122.2893322740011, 42.00798725405221]]]}}, {"county_fips": 6015, "Latitude": 41.8, "Longitude": -124.17, "Population": 16045.0, "q_0": 48179.61981925833, "q_0.05": 59940.56933624182, "q_0.1": 64839.90962916797, "q_0.15": 67196.70177625428, "q_0.2": 70450.49049548146, "q_0.25": 72596.34309753818, "q_0.3": 75143.26768463696, "q_0.35": 78975.69398566532, "q_0.4": 81046.88189467124, "q_0.45": 83875.1729510751, "q_0.5": 85795.17918354628, "q_0.55": 88211.14490495481, "q_0.6": 89383.75194764724, "q_0.65": 92911.35182299782, "q_0.7": 97241.76067310688, "q_0.75": 103385.97070738548, "q_0.8": 108540.80648177002, "q_0.85": 119124.5060766594, "q_0.9": 124843.94577750086, "q_0.95": 142020.91056403864, "q_1": 161716.75288251793, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-123.52046014788118, 42.001004258298366], [-123.56353167699652, 41.90324231774461], [-123.70351414662137, 41.81890921517902], [-123.66044261750604, 41.725981656301], [-123.69274626434253, 41.55194391597455], [-123.6101925002048, 41.461702124694156], [-123.66044261750604, 41.3822034038043], [-123.77171073438733, 41.38112909676524], [-123.77171073438733, 41.465462199330844], [-124.06962214410174, 41.46492504581131], [-124.15576520233242, 41.73135319149626], [-124.25626543693488, 41.78077131529267], [-124.21319390781954, 41.99831849070074], [-123.82196085168854, 41.99509556958358], [-123.52046014788118, 42.001004258298366]]]}}, {"county_fips": 6049, "Latitude": 41.78, "Longitude": -121.16, "Population": 9678.0, "q_0": 36439.22297995454, "q_0.05": 40455.337879727216, "q_0.1": 42437.467451952885, "q_0.15": 45682.73455259351, "q_0.2": 49868.28890266584, "q_0.25": 51760.02531514776, "q_0.3": 55790.37611076669, "q_0.35": 57961.44348005786, "q_0.4": 60685.356478611284, "q_0.45": 62599.5748088448, "q_0.5": 64461.29365571399, "q_0.55": 66238.47799132053, "q_0.6": 68606.93118412895, "q_0.65": 72107.89780946478, "q_0.7": 77984.6207894193, "q_0.75": 80304.74788179377, "q_0.8": 85955.8421161397, "q_0.85": 90909.10208720808, "q_0.9": 98572.55631328789, "q_0.95": 106684.66315354411, "q_1": 148031.4527794999, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.87873969547377, 41.993484109025005], [-119.99936264270228, 41.99509556958358], [-119.99936264270228, 41.183993755099166], [-121.33458004527776, 41.183993755099166], [-121.44584816215905, 41.183456601579636], [-121.44584816215905, 41.99670703014216], [-120.87873969547377, 41.993484109025005]]]}}, {"county_fips": 6023, "Latitude": 40.8, "Longitude": -124.17, "Population": 114223.0, "q_0": 55179.96386016827, "q_0.05": 66985.3729984329, "q_0.1": 71760.91916689284, "q_0.15": 75107.02778774852, "q_0.2": 77568.97997776279, "q_0.25": 79604.00072664875, "q_0.3": 81165.17251341674, "q_0.35": 82946.98064312791, "q_0.4": 84947.12203321572, "q_0.45": 87035.51683986587, "q_0.5": 89276.37647409015, "q_0.55": 91704.84574035002, "q_0.6": 94032.42569359936, "q_0.65": 96781.62953170552, "q_0.7": 99886.80248286248, "q_0.75": 103860.43528886477, "q_0.8": 108405.15412832792, "q_0.85": 114615.97589802403, "q_0.9": 123697.38493998583, "q_0.95": 138824.4206070581, "q_1": 192884.6842667414, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-123.66044261750604, 41.3822034038043], [-123.47738861876584, 41.36770025877709], [-123.40919203099989, 41.179696526942955], [-123.46303144239407, 41.074951590635365], [-123.41995991327873, 41.00941886125318], [-123.48097791285879, 40.914879841816585], [-123.62454967657658, 40.93153160092189], [-123.5455852065318, 40.73224764517771], [-123.5455852065318, 40.00171885862221], [-124.0265506149864, 40.00118170510268], [-124.11269367321708, 40.102703720293114], [-124.36394425972323, 40.25955254799474], [-124.41060508293151, 40.43896182351646], [-124.2742119073996, 40.699481280486616], [-124.15576520233242, 40.80852344495042], [-124.22396179009837, 40.75856816763449], [-124.12705084958887, 40.94979482058578], [-124.16294379051831, 41.07011720895963], [-124.1055150850312, 41.22857749721983], [-124.06962214410174, 41.46492504581131], [-123.77171073438733, 41.465462199330844], [-123.77171073438733, 41.38112909676524], [-123.66044261750604, 41.3822034038043]]]]}}, {"county_fips": 6105, "Latitude": 41.15, "Longitude": -122.68, "Population": 13063.0, "q_0": 44556.30062007196, "q_0.05": 56442.9344714078, "q_0.1": 61362.531646635536, "q_0.15": 64811.974603842915, "q_0.2": 67655.6487789941, "q_0.25": 70733.66186940213, "q_0.3": 73426.88586082829, "q_0.35": 75089.91426165505, "q_0.4": 76669.2903620914, "q_0.45": 78714.50202863048, "q_0.5": 80755.2782668606, "q_0.55": 82488.19643267243, "q_0.6": 84848.95965704662, "q_0.65": 88735.86733522161, "q_0.7": 91831.71706346169, "q_0.75": 95934.83311643574, "q_0.8": 102353.8773635459, "q_0.85": 109920.68284467579, "q_0.9": 116238.23394319837, "q_0.95": 123538.80617009873, "q_1": 185301.07854244814, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.50110062548484, 41.18291944806011], [-122.4580290963695, 41.09912349901404], [-122.54417215460018, 41.07334013007679], [-122.60519015418025, 40.88963362639886], [-122.75235121199098, 40.68497813545942], [-122.6985118005968, 40.5694901287613], [-123.00001250440418, 40.41801283625494], [-123.06461979807719, 40.28694737749057], [-122.97847673984651, 40.24290078888943], [-122.98924462212534, 40.146750308894255], [-122.93540521073118, 39.97808410376306], [-123.5455852065318, 39.97647264320448], [-123.5455852065318, 40.00171885862221], [-123.5455852065318, 40.73224764517771], [-123.62454967657658, 40.93153160092189], [-123.48097791285879, 40.914879841816585], [-123.41995991327873, 41.00941886125318], [-123.46303144239407, 41.074951590635365], [-123.40919203099989, 41.179696526942955], [-123.24049520863149, 41.07548874415489], [-123.11128062128547, 41.07548874415489], [-123.03949473942657, 41.004584479577446], [-122.9138694461735, 40.99706433030408], [-122.97488744575357, 41.11201518348267], [-122.88515509342994, 41.20494274236068], [-122.80260132929222, 41.20279412828258], [-122.57647580143669, 41.368237412296615], [-122.48315415502012, 41.320430749058794], [-122.50110062548484, 41.18291944806011]]]}}, {"county_fips": 6035, "Latitude": 41.07, "Longitude": -121.11, "Population": 27214.0, "q_0": 54668.461821121484, "q_0.05": 69571.0700374807, "q_0.1": 73914.15925626516, "q_0.15": 78910.54934959947, "q_0.2": 82024.66965532447, "q_0.25": 84535.61677812891, "q_0.3": 86603.79841258176, "q_0.35": 91224.3176306313, "q_0.4": 93992.92276034394, "q_0.45": 98133.62662600132, "q_0.5": 101374.83280664364, "q_0.55": 104427.34033953112, "q_0.6": 106866.25854339678, "q_0.65": 110055.5036010877, "q_0.7": 116680.59564929815, "q_0.75": 122316.42812522966, "q_0.8": 127655.87050782685, "q_0.85": 133358.54394796796, "q_0.9": 147539.20849562727, "q_0.95": 169426.24568236936, "q_1": 237849.50753288748, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.99936264270228, 41.183993755099166], [-119.99936264270228, 39.72186187494911], [-120.15011299460596, 39.70789588344143], [-120.10704146549062, 39.939409050357185], [-120.21113099418602, 40.086051961187806], [-120.34034558153203, 40.11505825124222], [-120.58082828575934, 40.28533591693199], [-120.76747157859248, 40.31541651402546], [-120.928989812775, 40.19187120453445], [-121.06179369421396, 40.25632962687758], [-121.06179369421396, 40.446481972789826], [-121.32740145709187, 40.44540766575077], [-121.32022286890599, 40.905748231984646], [-121.33458004527776, 41.183993755099166], [-119.99936264270228, 41.183993755099166]]]}}, {"county_fips": 6089, "Latitude": 40.59, "Longitude": -122.39, "Population": 147036.0, "q_0": 57633.13474251204, "q_0.05": 68207.89106069262, "q_0.1": 72856.94136129928, "q_0.15": 76045.14931717403, "q_0.2": 78849.39824260725, "q_0.25": 81533.29099676269, "q_0.3": 83854.94994423134, "q_0.35": 86065.48318098969, "q_0.4": 88415.7037732256, "q_0.45": 90610.92433145625, "q_0.5": 92610.50729073152, "q_0.55": 95591.55869991022, "q_0.6": 98173.21186648168, "q_0.65": 101535.27360646373, "q_0.7": 105053.85388612312, "q_0.75": 108944.24120623521, "q_0.8": 113681.50493756631, "q_0.85": 118842.61061916807, "q_0.9": 128078.30939361792, "q_0.95": 144583.3151405098, "q_1": 191417.1134960146, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.44584816215905, 41.183456601579636], [-121.33458004527776, 41.183993755099166], [-121.32022286890599, 40.905748231984646], [-121.32740145709187, 40.44540766575077], [-121.49609827946028, 40.44540766575077], [-122.0093673347514, 40.426607292567354], [-122.31086803855877, 40.37128048005617], [-122.52622568413545, 40.386857932122425], [-122.65544027148147, 40.32830819849408], [-122.74158332971214, 40.36537179134138], [-123.06461979807719, 40.28694737749057], [-123.00001250440418, 40.41801283625494], [-122.6985118005968, 40.5694901287613], [-122.75235121199098, 40.68497813545942], [-122.60519015418025, 40.88963362639886], [-122.54417215460018, 41.07334013007679], [-122.4580290963695, 41.09912349901404], [-122.50110062548484, 41.18291944806011], [-121.44584816215905, 41.183456601579636]]]}}, {"county_fips": 6103, "Latitude": 40.05, "Longitude": -122.1, "Population": 49625.0, "q_0": 53294.007052896726, "q_0.05": 60902.88624685138, "q_0.1": 65063.61370277078, "q_0.15": 67524.64906801007, "q_0.2": 69883.12141057935, "q_0.25": 71571.73501259446, "q_0.3": 73047.39022670026, "q_0.35": 75139.86095717884, "q_0.4": 77020.54649874056, "q_0.45": 78793.95113350126, "q_0.5": 81069.12544080605, "q_0.55": 83314.40584382872, "q_0.6": 85993.92564231738, "q_0.65": 89035.34720403023, "q_0.7": 91680.36735516373, "q_0.75": 95015.17430730478, "q_0.8": 99744.79113350126, "q_0.85": 105076.93732997481, "q_0.9": 111289.95738035266, "q_0.95": 120165.68171284634, "q_1": 162118.2520302267, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.49609827946028, 40.44540766575077], [-121.47097322080967, 40.3492571857556], [-121.384830162579, 40.34066272944318], [-121.36688369211427, 40.21282019179597], [-121.44584816215905, 40.15051038353094], [-121.5858306317839, 40.09948079917596], [-121.65043792545691, 39.982918485438795], [-121.80477757145354, 39.88515654488504], [-122.04526027568085, 39.88461939136552], [-122.04526027568085, 39.79706336768277], [-122.93899450482411, 39.798137674721815], [-122.93540521073118, 39.97808410376306], [-122.98924462212534, 40.146750308894255], [-122.97847673984651, 40.24290078888943], [-123.06461979807719, 40.28694737749057], [-122.74158332971214, 40.36537179134138], [-122.65544027148147, 40.32830819849408], [-122.52622568413545, 40.386857932122425], [-122.31086803855877, 40.37128048005617], [-122.0093673347514, 40.426607292567354], [-121.49609827946028, 40.44540766575077]]]}}, {"county_fips": 6063, "Latitude": 39.93, "Longitude": -120.98, "Population": 19739.0, "q_0": 46761.36622929227, "q_0.05": 59659.29302396272, "q_0.1": 65017.312933785906, "q_0.15": 70031.65585895942, "q_0.2": 73872.86589999494, "q_0.25": 77232.93859871321, "q_0.3": 79634.94908556665, "q_0.35": 82219.35837681747, "q_0.4": 84856.84786463347, "q_0.45": 88052.66756167992, "q_0.5": 91210.73509296316, "q_0.55": 94093.01484371042, "q_0.6": 96962.37499366736, "q_0.65": 100529.25578803384, "q_0.7": 103717.84690207204, "q_0.75": 108354.62662748873, "q_0.8": 112691.73007751153, "q_0.85": 120720.16768833272, "q_0.9": 130275.33953087796, "q_0.95": 141240.95531688532, "q_1": 193233.5704442981, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.32740145709187, 40.44540766575077], [-121.06179369421396, 40.446481972789826], [-121.06179369421396, 40.25632962687758], [-120.928989812775, 40.19187120453445], [-120.76747157859248, 40.31541651402546], [-120.58082828575934, 40.28533591693199], [-120.34034558153203, 40.11505825124222], [-120.21113099418602, 40.086051961187806], [-120.10704146549062, 39.939409050357185], [-120.15011299460596, 39.70789588344143], [-120.65620346171119, 39.7052101158438], [-120.6813285203618, 39.67674097930892], [-120.87156110728787, 39.77665153394077], [-121.00795428281978, 39.63699161886399], [-121.07615087058574, 39.59724225841905], [-121.42790169169433, 39.9007339969513], [-121.3776515743931, 40.051674135938136], [-121.44584816215905, 40.15051038353094], [-121.36688369211427, 40.21282019179597], [-121.384830162579, 40.34066272944318], [-121.47097322080967, 40.3492571857556], [-121.49609827946028, 40.44540766575077], [-121.32740145709187, 40.44540766575077]]]}}, {"county_fips": 6007, "Latitude": 39.76, "Longitude": -121.83, "Population": 182120.0, "q_0": 53339.68013946848, "q_0.05": 63875.32056336482, "q_0.1": 68626.71878980892, "q_0.15": 72710.02597737755, "q_0.2": 75330.52655392048, "q_0.25": 78452.02092027235, "q_0.3": 80940.59861629695, "q_0.35": 83291.39020975181, "q_0.4": 85591.87876125632, "q_0.45": 88131.32308368108, "q_0.5": 90371.8317592796, "q_0.55": 92765.41865253678, "q_0.6": 95075.86097078849, "q_0.65": 98035.8326103668, "q_0.7": 100892.98028772238, "q_0.75": 104369.63183615198, "q_0.8": 109267.18229738635, "q_0.85": 114815.18210520534, "q_0.9": 122234.700527125, "q_0.95": 135655.75897759717, "q_1": 202145.89211508897, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.07615087058574, 39.59724225841905], [-121.16229392881641, 39.519892151607294], [-121.30227639844126, 39.519892151607294], [-121.37047298620722, 39.36841485910093], [-121.6253128668063, 39.29589913396491], [-121.90886710014894, 39.304493590277325], [-121.89092062968422, 39.38399231116719], [-121.85143839466183, 39.53761821775166], [-121.99501015837961, 39.533320989595445], [-121.99501015837961, 39.67083229059413], [-121.94117074698545, 39.70037573416806], [-122.04526027568085, 39.79706336768277], [-122.04526027568085, 39.88461939136552], [-121.80477757145354, 39.88515654488504], [-121.65043792545691, 39.982918485438795], [-121.5858306317839, 40.09948079917596], [-121.44584816215905, 40.15051038353094], [-121.3776515743931, 40.051674135938136], [-121.42790169169433, 39.9007339969513], [-121.07615087058574, 39.59724225841905]]]}}, {"county_fips": 6045, "Latitude": 39.74, "Longitude": -123.15, "Population": 71433.0, "q_0": 59525.948987162796, "q_0.05": 72486.04783503423, "q_0.1": 79099.65590133412, "q_0.15": 84627.86842215783, "q_0.2": 89890.65585933672, "q_0.25": 94096.80819789173, "q_0.3": 97549.96276230874, "q_0.35": 101744.49393137626, "q_0.4": 105253.891338737, "q_0.45": 109077.91930900284, "q_0.5": 112835.99876807637, "q_0.55": 115803.01534304873, "q_0.6": 118484.35876975628, "q_0.65": 122336.80126832136, "q_0.7": 126117.19667380622, "q_0.75": 132255.36131759832, "q_0.8": 138064.62895300493, "q_0.85": 145834.6726302969, "q_0.9": 155432.70211246907, "q_0.95": 169757.02238461212, "q_1": 259590.48340402896, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-123.5455852065318, 40.00171885862221], [-123.5455852065318, 39.97647264320448], [-122.93540521073118, 39.97808410376306], [-122.93899450482411, 39.798137674721815], [-122.88874438752289, 39.582739113391845], [-122.88874438752289, 39.53117237551734], [-123.06103050398424, 39.50270323898246], [-123.07538768035602, 39.40816421954587], [-123.01436968077596, 39.235737939777984], [-123.09333415082074, 39.07244326984205], [-122.98924462212534, 38.99724177710839], [-122.94617309301, 38.900554143593695], [-122.81695850566399, 38.85006171275824], [-123.08256626854191, 38.85274748035587], [-123.14358426812197, 38.809238045274256], [-123.3697097959775, 38.805477970637575], [-123.5384066183459, 38.76841437779028], [-123.74299638164376, 38.950509420909626], [-123.69274626434253, 39.02248799252612], [-123.82913943987444, 39.34692871831989], [-123.77171073438733, 39.533320989595445], [-123.85426449852505, 39.83090403941291], [-124.0265506149864, 40.00118170510268], [-123.5455852065318, 40.00171885862221]]]}}, {"county_fips": 6021, "Latitude": 39.75, "Longitude": -122.2, "Population": 24798.0, "q_0": 49456.32272763932, "q_0.05": 58088.59605613356, "q_0.1": 60876.007339301555, "q_0.15": 63236.289015243165, "q_0.2": 64929.577385273005, "q_0.25": 66807.55202032422, "q_0.3": 68494.29470118559, "q_0.35": 70193.41600129043, "q_0.4": 71986.24485845632, "q_0.45": 73637.69880635536, "q_0.5": 75264.73505927897, "q_0.55": 77004.2824018066, "q_0.6": 79569.88870070167, "q_0.65": 82713.82389708847, "q_0.7": 86185.52221953383, "q_0.75": 91182.5782321155, "q_0.8": 96235.36010968627, "q_0.85": 101468.83397854665, "q_0.9": 107830.10404064845, "q_0.95": 126946.4152350996, "q_1": 169839.40640374224, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.04526027568085, 39.79706336768277], [-121.94117074698545, 39.70037573416806], [-121.99501015837961, 39.67083229059413], [-121.99501015837961, 39.533320989595445], [-121.85143839466183, 39.53761821775166], [-121.89092062968422, 39.38399231116719], [-122.13858192209742, 39.41461006178018], [-122.13858192209742, 39.38614092524529], [-122.73799403561921, 39.382918004128136], [-122.73440474152626, 39.58112765283327], [-122.88874438752289, 39.582739113391845], [-122.93899450482411, 39.798137674721815], [-122.04526027568085, 39.79706336768277]]]}}, {"county_fips": 6091, "Latitude": 39.61, "Longitude": -120.08, "Population": 3318.0, "q_0": 46967.29957805907, "q_0.05": 61203.73869801085, "q_0.1": 66968.66184448464, "q_0.15": 70047.54068716094, "q_0.2": 74517.89029535865, "q_0.25": 79791.59132007233, "q_0.3": 83311.78420735383, "q_0.35": 86781.28993369499, "q_0.4": 91093.74924653406, "q_0.45": 93824.18927064497, "q_0.5": 96432.32368896926, "q_0.55": 98467.39150090415, "q_0.6": 101384.35201928872, "q_0.65": 104690.99156118144, "q_0.7": 107992.72151898734, "q_0.75": 114074.38215792646, "q_0.8": 120000.837854129, "q_0.85": 129486.63803496081, "q_0.9": 146260.42796865586, "q_0.95": 168899.5313441832, "q_1": 231040.91109101867, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.15011299460596, 39.70789588344143], [-119.99936264270228, 39.72186187494911], [-120.00295193679523, 39.4479135799908], [-120.5054531098075, 39.44683927295174], [-120.56288181529462, 39.51559492345108], [-120.65979275580413, 39.52526368680255], [-120.76029299040658, 39.45167365462748], [-121.01872216509861, 39.39473538155771], [-121.00795428281978, 39.63699161886399], [-120.87156110728787, 39.77665153394077], [-120.6813285203618, 39.67674097930892], [-120.65620346171119, 39.7052101158438], [-120.15011299460596, 39.70789588344143]]]}}, {"county_fips": 6115, "Latitude": 39.12, "Longitude": -121.6, "Population": 59722.0, "q_0": 46934.00924282509, "q_0.05": 58011.09222731992, "q_0.1": 61406.29215364522, "q_0.15": 63521.47207059375, "q_0.2": 66004.95562774187, "q_0.25": 68641.88238839958, "q_0.3": 71404.44794213188, "q_0.35": 73540.37699675161, "q_0.4": 74993.92719600817, "q_0.45": 77333.3074913767, "q_0.5": 79270.16007501424, "q_0.55": 82283.9304611366, "q_0.6": 85638.38384514919, "q_0.65": 89079.47674223904, "q_0.7": 93071.1491577643, "q_0.75": 97371.12998559995, "q_0.8": 103185.75801212284, "q_0.85": 109886.82579284014, "q_0.9": 119624.03804293227, "q_0.95": 138118.3383845149, "q_1": 198853.1562908141, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.00795428281978, 39.63699161886399], [-121.01872216509861, 39.39473538155771], [-121.12640098788697, 39.37969508301098], [-121.2807406338836, 39.230366404582725], [-121.2807406338836, 39.03484252347522], [-121.41354451532256, 38.99670462358887], [-121.58224133769096, 38.93170904772621], [-121.6253128668063, 39.29589913396491], [-121.37047298620722, 39.36841485910093], [-121.30227639844126, 39.519892151607294], [-121.16229392881641, 39.519892151607294], [-121.07615087058574, 39.59724225841905], [-121.00795428281978, 39.63699161886399]]]}}, {"county_fips": 6033, "Latitude": 39.42, "Longitude": -122.89, "Population": 50631.0, "q_0": 53229.66883924868, "q_0.05": 66661.18877762636, "q_0.1": 71891.06503920523, "q_0.15": 74592.56868321779, "q_0.2": 77683.73131085698, "q_0.25": 80889.15239675298, "q_0.3": 84353.17256226423, "q_0.35": 87425.33517015267, "q_0.4": 90247.41245482017, "q_0.45": 93658.53024826688, "q_0.5": 97145.46325373783, "q_0.55": 101152.40070312655, "q_0.6": 104329.7612134858, "q_0.65": 108648.245245008, "q_0.7": 113591.6165985266, "q_0.75": 119087.3086646521, "q_0.8": 127247.51002350339, "q_0.85": 137276.02970512136, "q_0.9": 149107.90523592266, "q_0.95": 167627.37245956034, "q_1": 243261.3097114416, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.73799403561921, 39.382918004128136], [-122.77388697654865, 39.32168250290216], [-122.66261885966736, 39.21640041307504], [-122.47597556683422, 39.17396528503248], [-122.49392203729896, 39.05955158537343], [-122.33958239130233, 38.923651744933316], [-122.39701109678944, 38.86402770426592], [-122.4652076845554, 38.704493108966666], [-122.62672591873792, 38.66742951611937], [-122.81695850566399, 38.85006171275824], [-122.94617309301, 38.900554143593695], [-122.98924462212534, 38.99724177710839], [-123.09333415082074, 39.07244326984205], [-123.01436968077596, 39.235737939777984], [-123.07538768035602, 39.40816421954587], [-123.06103050398424, 39.50270323898246], [-122.88874438752289, 39.53117237551734], [-122.88874438752289, 39.582739113391845], [-122.73440474152626, 39.58112765283327], [-122.73799403561921, 39.382918004128136]]]}}, {"county_fips": 6057, "Latitude": 39.15, "Longitude": -121.07, "Population": 78510.0, "q_0": 75664.39495605655, "q_0.05": 96203.81238058845, "q_0.1": 107647.3714176538, "q_0.15": 115362.35568717361, "q_0.2": 121288.39052350019, "q_0.25": 126289.58221882563, "q_0.3": 131274.9448477901, "q_0.35": 135450.0051585785, "q_0.4": 139249.94115399313, "q_0.45": 143056.63991848173, "q_0.5": 146401.07502229014, "q_0.55": 150151.14756082027, "q_0.6": 153259.79467583747, "q_0.65": 157071.8577888167, "q_0.7": 161601.2737230926, "q_0.75": 167565.64545917718, "q_0.8": 172813.03324417272, "q_0.85": 181747.15412049418, "q_0.9": 192724.6060374475, "q_0.95": 207643.49401350145, "q_1": 271945.61957712396, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.00295193679523, 39.4479135799908], [-120.00654123088816, 39.315773814187374], [-120.64902487352529, 39.31523666066785], [-120.94693628323972, 39.144421841458545], [-121.04384722374922, 39.01335638269418], [-121.2807406338836, 39.03484252347522], [-121.2807406338836, 39.230366404582725], [-121.12640098788697, 39.37969508301098], [-121.01872216509861, 39.39473538155771], [-120.76029299040658, 39.45167365462748], [-120.65979275580413, 39.52526368680255], [-120.56288181529462, 39.51559492345108], [-120.5054531098075, 39.44683927295174], [-120.00295193679523, 39.4479135799908]]]}}, {"county_fips": 6011, "Latitude": 39.03, "Longitude": -121.91, "Population": 16275.0, "q_0": 54514.56835637481, "q_0.05": 62274.01843317972, "q_0.1": 64267.70322580645, "q_0.15": 67388.59262672812, "q_0.2": 69377.52258064516, "q_0.25": 71221.44393241167, "q_0.3": 73514.07557603686, "q_0.35": 76161.01966205837, "q_0.4": 78871.56989247311, "q_0.45": 81413.30568356375, "q_0.5": 83720.77112135176, "q_0.55": 87289.21382488479, "q_0.6": 90852.36129032259, "q_0.65": 94554.579109063, "q_0.7": 97754.1400921659, "q_0.75": 102196.52380952382, "q_0.8": 106992.19539170507, "q_0.85": 113774.50537634407, "q_0.9": 122696.37480798773, "q_0.95": 141027.8506912442, "q_1": 222357.044546851, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.89092062968422, 39.38399231116719], [-121.90886710014894, 39.304493590277325], [-121.95193862926428, 39.249166777766135], [-121.89092062968422, 39.074054730400626], [-121.84067051238299, 39.062774506490584], [-121.8334919241971, 38.92472605197237], [-122.33958239130233, 38.923651744933316], [-122.49392203729896, 39.05955158537343], [-122.47597556683422, 39.17396528503248], [-122.66261885966736, 39.21640041307504], [-122.77388697654865, 39.32168250290216], [-122.73799403561921, 39.382918004128136], [-122.13858192209742, 39.38614092524529], [-122.13858192209742, 39.41461006178018], [-121.89092062968422, 39.38399231116719]]]}}, {"county_fips": 6061, "Latitude": 39.17, "Longitude": -120.1, "Population": 173857.0, "q_0": 89466.61829549572, "q_0.05": 111065.4433241112, "q_0.1": 119373.73134242509, "q_0.15": 126367.16281196616, "q_0.2": 131096.3174332929, "q_0.25": 136157.2397142479, "q_0.3": 139807.62114841508, "q_0.35": 144269.96105995157, "q_0.4": 148960.65778197025, "q_0.45": 152753.84985936718, "q_0.5": 156366.40572424463, "q_0.55": 160237.60800542976, "q_0.6": 165358.77036875134, "q_0.65": 169902.89042143832, "q_0.7": 176930.78650845235, "q_0.75": 183261.35286471064, "q_0.8": 189015.5377120277, "q_0.85": 197079.35894441983, "q_0.9": 208627.75492502458, "q_0.95": 223494.5589363672, "q_1": 285863.36171681323, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.00654123088816, 39.315773814187374], [-120.00295193679523, 39.165370828720064], [-120.00295193679523, 39.11272978380651], [-120.00295193679523, 39.06760888816631], [-120.14293440642007, 39.06760888816631], [-120.23984534692958, 39.02302514604565], [-120.4336672279486, 39.028396681240906], [-120.56288181529462, 38.91344582806232], [-120.76747157859248, 39.009596308057496], [-120.8572039309161, 38.952120881468204], [-121.03666863556334, 38.9150572886209], [-121.14434745835169, 38.712013258240034], [-121.48891969127439, 38.735110859579656], [-121.47097322080967, 38.925263205491895], [-121.41354451532256, 38.99670462358887], [-121.2807406338836, 39.03484252347522], [-121.04384722374922, 39.01335638269418], [-120.94693628323972, 39.144421841458545], [-120.64902487352529, 39.31523666066785], [-120.00654123088816, 39.315773814187374]]]}}, {"county_fips": 6101, "Latitude": 39.16, "Longitude": -121.62, "Population": 62921.0, "q_0": 62021.242510449614, "q_0.05": 71936.33222612482, "q_0.1": 76915.10068180735, "q_0.15": 80130.02209119372, "q_0.2": 84167.1461038445, "q_0.25": 86531.67026906756, "q_0.3": 89483.3445113714, "q_0.35": 92227.90737591583, "q_0.4": 95214.41903339108, "q_0.45": 98514.07598417063, "q_0.5": 101966.05902639819, "q_0.55": 104966.94362772365, "q_0.6": 108869.11047186154, "q_0.65": 112954.98815975589, "q_0.7": 117187.12099299121, "q_0.75": 122229.89979498101, "q_0.8": 129049.98045167752, "q_0.85": 138971.81036537877, "q_0.9": 153157.19584876276, "q_0.95": 173508.72538580123, "q_1": 249050.8176920265, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.6253128668063, 39.29589913396491], [-121.58224133769096, 38.93170904772621], [-121.41354451532256, 38.99670462358887], [-121.47097322080967, 38.925263205491895], [-121.48891969127439, 38.735110859579656], [-121.60377710224863, 38.73564801309918], [-121.69350945457225, 38.7668029172317], [-121.7294023955017, 38.85919332259019], [-121.8334919241971, 38.92472605197237], [-121.84067051238299, 39.062774506490584], [-121.89092062968422, 39.074054730400626], [-121.95193862926428, 39.249166777766135], [-121.90886710014894, 39.304493590277325], [-121.6253128668063, 39.29589913396491]]]}}, {"county_fips": 6017, "Latitude": 38.95, "Longitude": -119.95, "Population": 125528.0, "q_0": 84371.16528583264, "q_0.05": 105942.27232171308, "q_0.1": 114255.1457842075, "q_0.15": 119498.71439041488, "q_0.2": 123874.59116691096, "q_0.25": 129071.94530303996, "q_0.3": 132409.61697788542, "q_0.35": 135865.8958160729, "q_0.4": 139235.71187304825, "q_0.45": 143254.90635555415, "q_0.5": 146451.37897520873, "q_0.55": 150872.95981772992, "q_0.6": 154429.6931361927, "q_0.65": 157868.3375820534, "q_0.7": 162081.53288509336, "q_0.75": 165927.29251641067, "q_0.8": 171599.59467210504, "q_0.85": 178506.33014148235, "q_0.9": 189835.5396405583, "q_0.95": 211064.3979032566, "q_1": 280893.7891386782, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.00295193679523, 39.06760888816631], [-119.99936264270228, 38.99885323766697], [-119.90604099628571, 38.93332050828479], [-119.87732664354215, 38.86725062538308], [-120.07114852456118, 38.70288164840809], [-120.07473781865411, 38.70127018784951], [-120.2649704055802, 38.56214742629225], [-120.63107840306057, 38.50306053914438], [-120.82848957817254, 38.55999881221415], [-121.0259007532845, 38.50843207433964], [-121.14434745835169, 38.712013258240034], [-121.03666863556334, 38.9150572886209], [-120.8572039309161, 38.952120881468204], [-120.76747157859248, 39.009596308057496], [-120.56288181529462, 38.91344582806232], [-120.4336672279486, 39.028396681240906], [-120.23984534692958, 39.02302514604565], [-120.14293440642007, 39.06760888816631], [-120.00295193679523, 39.06760888816631]]]}}, {"county_fips": 6003, "Latitude": 38.69, "Longitude": -119.78, "Population": 1113.0, "q_0": 49380.053908355796, "q_0.05": 73613.69272237197, "q_0.1": 82974.55525606469, "q_0.15": 94567.78077268643, "q_0.2": 97199.74842767295, "q_0.25": 100298.42767295598, "q_0.3": 105481.94070080863, "q_0.35": 112717.96945193171, "q_0.4": 123057.3944294699, "q_0.45": 126429.11051212938, "q_0.5": 129896.7654986523, "q_0.55": 131019.54177897575, "q_0.6": 135920.57502246182, "q_0.65": 142892.41239892182, "q_0.7": 149540.07187780773, "q_0.75": 163727.628032345, "q_0.8": 170628.26594788858, "q_0.85": 179761.3836477987, "q_0.9": 198008.35579514824, "q_0.95": 217708.09523809518, "q_1": 234724.3486073675, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.57941523382773, 38.7093274906424], [-119.61171888066423, 38.66313228796316], [-119.54352229289827, 38.477277170207124], [-119.64043323340779, 38.326874184739815], [-119.75170135028908, 38.416578822500675], [-119.88450523172804, 38.35910339591138], [-120.02089840725995, 38.437527809762194], [-120.07114852456118, 38.510043534898216], [-120.07473781865411, 38.70127018784951], [-120.07114852456118, 38.70288164840809], [-119.87732664354215, 38.86725062538308], [-119.90604099628571, 38.93332050828479], [-119.57941523382773, 38.7093274906424]]]}}, {"county_fips": 6113, "Latitude": 38.53, "Longitude": -121.52, "Population": 157454.0, "q_0": 77948.07689864977, "q_0.05": 99675.19354859197, "q_0.1": 106422.54258386577, "q_0.15": 112884.86697702185, "q_0.2": 118710.85853646144, "q_0.25": 122699.27820188753, "q_0.3": 126645.18818194521, "q_0.35": 130494.60601191458, "q_0.4": 134191.0187102265, "q_0.45": 138726.99067664208, "q_0.5": 143431.28469267214, "q_0.55": 147909.50763397565, "q_0.6": 153145.9599629098, "q_0.65": 159201.3543955695, "q_0.7": 164959.22987031133, "q_0.75": 172745.20558385307, "q_0.8": 180347.39263530937, "q_0.85": 192780.66555946495, "q_0.9": 208324.7662809456, "q_0.95": 236540.63974240096, "q_1": 307367.0333875291, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.8334919241971, 38.92472605197237], [-121.7294023955017, 38.85919332259019], [-121.69350945457225, 38.7668029172317], [-121.60377710224863, 38.73564801309918], [-121.63608074908512, 38.691064270978515], [-121.514044749925, 38.54388420662836], [-121.5212233381109, 38.361789163509016], [-121.60018780815568, 38.313445346751664], [-121.69350945457225, 38.31559396082977], [-121.69350945457225, 38.525620986964476], [-121.9375814528925, 38.533141136237845], [-122.1062782752609, 38.513803609534904], [-122.1062782752609, 38.513803609534904], [-122.2893322740011, 38.839855795887246], [-122.39701109678944, 38.86402770426592], [-122.33958239130233, 38.923651744933316], [-121.8334919241971, 38.92472605197237]]]}}, {"county_fips": 6055, "Latitude": 38.3, "Longitude": -122.29, "Population": 108030.0, "q_0": 88044.46820327686, "q_0.05": 116034.14301582893, "q_0.1": 130044.08914190503, "q_0.15": 140131.90886790707, "q_0.2": 147300.47727483106, "q_0.25": 153909.21503286125, "q_0.3": 160483.8871609738, "q_0.35": 166546.34138665185, "q_0.4": 171733.91780061094, "q_0.45": 177899.47829306673, "q_0.5": 183209.99444598722, "q_0.55": 188484.2478015366, "q_0.6": 195165.640285106, "q_0.65": 200620.69221512543, "q_0.7": 206325.36008516152, "q_0.75": 214381.7027677497, "q_0.8": 223652.99520503564, "q_0.85": 234942.58063917427, "q_0.9": 248622.9968897529, "q_0.95": 269388.6172729797, "q_1": 362806.6801629177, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.1062782752609, 38.513803609534904], [-122.1062782752609, 38.51326645601537], [-122.13140333391152, 38.427859046410724], [-122.06320674614557, 38.31559396082977], [-122.20677850986337, 38.31559396082977], [-122.19959992167747, 38.15605936553052], [-122.29292156809404, 38.15659651905004], [-122.30368945037287, 38.15659651905004], [-122.40418968497534, 38.15552221201099], [-122.41136827316123, 38.157670826089095], [-122.35752886176705, 38.22535216954938], [-122.39701109678944, 38.30538804395877], [-122.64467238920264, 38.603508247295764], [-122.62672591873792, 38.66742951611937], [-122.4652076845554, 38.704493108966666], [-122.39701109678944, 38.86402770426592], [-122.2893322740011, 38.839855795887246], [-122.1062782752609, 38.513803609534904]]]}}, {"county_fips": 6097, "Latitude": 38.27, "Longitude": -122.42, "Population": 385296.0, "q_0": 101061.03956438685, "q_0.05": 137347.991751796, "q_0.1": 150795.47763278103, "q_0.15": 159797.15821083012, "q_0.2": 167375.55256218594, "q_0.25": 173678.70169947261, "q_0.3": 179596.37574747726, "q_0.35": 185132.55487988456, "q_0.4": 190350.95754952036, "q_0.45": 194757.38987687387, "q_0.5": 199261.4378296167, "q_0.55": 203956.6213378805, "q_0.6": 209394.4197188655, "q_0.65": 215975.72213311325, "q_0.7": 223591.13616544163, "q_0.75": 231897.44410790666, "q_0.8": 241113.84151405672, "q_0.85": 253658.87686389164, "q_0.9": 267630.6062793281, "q_0.95": 290990.32450375817, "q_1": 364283.7526499107, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.81695850566399, 38.85006171275824], [-122.62672591873792, 38.66742951611937], [-122.64467238920264, 38.603508247295764], [-122.39701109678944, 38.30538804395877], [-122.35752886176705, 38.22535216954938], [-122.41136827316123, 38.157670826089095], [-122.50110062548484, 38.1125499304489], [-122.55135074278607, 38.15820797960862], [-122.74158332971214, 38.207088949885495], [-122.89592297570877, 38.312371039712616], [-123.00719109259006, 38.29625643412683], [-123.1292270917502, 38.4498823407113], [-123.25485238500326, 38.512192148976325], [-123.5384066183459, 38.76841437779028], [-123.3697097959775, 38.805477970637575], [-123.14358426812197, 38.809238045274256], [-123.08256626854191, 38.85274748035587], [-122.81695850566399, 38.85006171275824]]]}}, {"county_fips": 6067, "Latitude": 38.72, "Longitude": -121.27, "Population": 1016152.0, "q_0": 76058.8342895551, "q_0.05": 94097.4036069407, "q_0.1": 100847.68436218203, "q_0.15": 105484.03505577905, "q_0.2": 109711.47956211276, "q_0.25": 113493.3786726789, "q_0.3": 117257.11576614522, "q_0.35": 120649.55254725671, "q_0.4": 124069.28924019242, "q_0.45": 127310.71804218266, "q_0.5": 130838.19236689, "q_0.55": 134557.8144214645, "q_0.6": 138579.92140939544, "q_0.65": 142971.0392982546, "q_0.7": 147834.12001354128, "q_0.75": 153310.1505412084, "q_0.8": 160087.03418484636, "q_0.85": 168733.30378821277, "q_0.9": 179969.63214952097, "q_0.95": 201273.58510773975, "q_1": 273912.4381175257, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-121.0259007532845, 38.50843207433964], [-121.0259007532845, 38.29786789468541], [-121.34175863346366, 38.22857509066654], [-121.47097322080967, 38.25972999479905], [-121.57506274950507, 38.10878985581222], [-121.67915227820048, 38.093212403745966], [-121.65761651364281, 38.182379887987295], [-121.60018780815568, 38.313445346751664], [-121.5212233381109, 38.361789163509016], [-121.514044749925, 38.54388420662836], [-121.63608074908512, 38.691064270978515], [-121.60377710224863, 38.73564801309918], [-121.48891969127439, 38.735110859579656], [-121.14434745835169, 38.712013258240034], [-121.0259007532845, 38.50843207433964]]]]}}, {"county_fips": 6051, "Latitude": 38.51, "Longitude": -119.54, "Population": 9956.0, "q_0": 62891.4943752511, "q_0.05": 78353.33668139816, "q_0.1": 85301.25753314584, "q_0.15": 93450.84773001206, "q_0.2": 101336.80594616312, "q_0.25": 106607.53816793892, "q_0.3": 111497.76516673363, "q_0.35": 117449.59371233427, "q_0.4": 121271.76175170751, "q_0.45": 126904.90257131378, "q_0.5": 129606.106870229, "q_0.55": 135629.3782643632, "q_0.6": 140820.25110486138, "q_0.65": 148194.8633989554, "q_0.7": 156344.99698674167, "q_0.75": 165772.49648453193, "q_0.8": 174785.35757332263, "q_0.85": 183480.1858175974, "q_0.9": 198429.19885496184, "q_0.95": 226944.05112494974, "q_1": 295820.3617918843, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.32816464732159, 38.53582690383547], [-119.15587853086024, 38.4149673619421], [-118.42725182999243, 37.89607706207988], [-117.83501830465653, 37.46474278590042], [-118.77900265110102, 37.46313132534184], [-119.02307464942128, 37.585602327793794], [-119.11639629583784, 37.73009662454632], [-119.27073594183447, 37.73922823437826], [-119.20253935406852, 37.79509220040897], [-119.19895005997557, 37.88533399168936], [-119.32098605913569, 37.96805563369638], [-119.3532897059722, 38.0856922544726], [-119.55070088108417, 38.14370483458141], [-119.63325464522191, 38.1990316470926], [-119.64043323340779, 38.326874184739815], [-119.54352229289827, 38.477277170207124], [-119.61171888066423, 38.66313228796316], [-119.57941523382773, 38.7093274906424], [-119.32816464732159, 38.53582690383547]]]}}, {"county_fips": 6005, "Latitude": 38.48, "Longitude": -120.56, "Population": 30039.0, "q_0": 79479.37348114119, "q_0.05": 96687.91454442558, "q_0.1": 102651.15483205166, "q_0.15": 107245.85838410066, "q_0.2": 110391.15549785279, "q_0.25": 114542.77272878592, "q_0.3": 117512.41419488, "q_0.35": 121535.89267285862, "q_0.4": 124680.41812310663, "q_0.45": 129429.64995505843, "q_0.5": 132366.89803255768, "q_0.55": 136024.74832717466, "q_0.6": 139664.70588235295, "q_0.65": 144257.06581444122, "q_0.7": 148848.6504211192, "q_0.75": 154298.55604380972, "q_0.8": 159872.3759113153, "q_0.85": 165708.4280435434, "q_0.9": 173242.17184327045, "q_0.95": 196995.93511768032, "q_1": 288815.95249508973, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.07473781865411, 38.70127018784951], [-120.07114852456118, 38.70288164840809], [-120.07473781865411, 38.70127018784951], [-120.07114852456118, 38.510043534898216], [-120.41572075748388, 38.47351709557044], [-120.61313193259585, 38.39831560283679], [-120.63107840306057, 38.33976586920844], [-120.80336451952192, 38.288736284853464], [-120.89668616593849, 38.2215920949127], [-120.99359710644801, 38.22535216954938], [-121.0259007532845, 38.29786789468541], [-121.0259007532845, 38.50843207433964], [-120.82848957817254, 38.55999881221415], [-120.63107840306057, 38.50306053914438], [-120.2649704055802, 38.56214742629225], [-120.07473781865411, 38.70127018784951]]]}}, {"county_fips": 6095, "Latitude": 38.12, "Longitude": -122.22, "Population": 329647.0, "q_0": 95321.58581755636, "q_0.05": 119861.07953356166, "q_0.1": 128890.34075844767, "q_0.15": 134758.18791009777, "q_0.2": 140313.4134392244, "q_0.25": 144490.6754042961, "q_0.3": 147933.57206344968, "q_0.35": 151090.24618758855, "q_0.4": 154754.6522188887, "q_0.45": 158398.4677700692, "q_0.5": 162792.3478751513, "q_0.55": 168527.49573028117, "q_0.6": 172997.9917912191, "q_0.65": 179144.79294518076, "q_0.7": 184551.26890279603, "q_0.75": 191274.01503729747, "q_0.8": 201000.89962899708, "q_0.85": 209081.263533416, "q_0.9": 222957.48498545418, "q_0.95": 245380.9280836774, "q_1": 321091.4316678144, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-122.30368945037287, 38.15659651905004], [-122.2498500389787, 38.081395026316386], [-122.40418968497534, 38.15552221201099], [-122.30368945037287, 38.15659651905004]]], [[[-121.60018780815568, 38.313445346751664], [-121.65761651364281, 38.182379887987295], [-121.79759898326765, 38.0631318066525], [-121.90886710014894, 38.05024012218387], [-122.05602815795967, 38.13349891771042], [-122.13140333391152, 38.04379427994956], [-122.24267145079281, 38.071726262964916], [-122.29292156809404, 38.15659651905004], [-122.19959992167747, 38.15605936553052], [-122.20677850986337, 38.31559396082977], [-122.06320674614557, 38.31559396082977], [-122.13140333391152, 38.427859046410724], [-122.1062782752609, 38.51326645601537], [-122.1062782752609, 38.513803609534904], [-121.9375814528925, 38.533141136237845], [-121.69350945457225, 38.525620986964476], [-121.69350945457225, 38.31559396082977], [-121.60018780815568, 38.313445346751664]]]]}}, {"county_fips": 6009, "Latitude": 38.15, "Longitude": -120.46, "Population": 31998.0, "q_0": 70982.48640540034, "q_0.05": 90701.13007062941, "q_0.1": 95318.1848865554, "q_0.15": 101111.03303331458, "q_0.2": 105519.41933870867, "q_0.25": 109217.4792174511, "q_0.3": 110914.50403150197, "q_0.35": 112549.05369085568, "q_0.4": 116099.49434339647, "q_0.45": 118826.05850365647, "q_0.5": 121163.69460591287, "q_0.55": 123114.67826114132, "q_0.6": 125174.75029689356, "q_0.65": 128137.9651853241, "q_0.7": 133014.345584099, "q_0.75": 135929.73467091692, "q_0.8": 140773.599599975, "q_0.85": 147103.5092818301, "q_0.9": 154950.37502343897, "q_0.95": 167194.24620288768, "q_1": 225894.76361022564, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.07114852456118, 38.510043534898216], [-120.02089840725995, 38.437527809762194], [-120.14293440642007, 38.394018374680584], [-120.27214899376608, 38.27047306518958], [-120.51981028617928, 37.951941028110596], [-120.65620346171119, 37.83108148621722], [-120.92540051868205, 38.077634951679705], [-120.99359710644801, 38.22535216954938], [-120.89668616593849, 38.2215920949127], [-120.80336451952192, 38.288736284853464], [-120.63107840306057, 38.33976586920844], [-120.61313193259585, 38.39831560283679], [-120.41572075748388, 38.47351709557044], [-120.07114852456118, 38.510043534898216]]]}}, {"county_fips": 6109, "Latitude": 38.0, "Longitude": -120.4, "Population": 48456.0, "q_0": 65551.82227175169, "q_0.05": 81619.77443453854, "q_0.1": 87485.37972593693, "q_0.15": 92212.24110533268, "q_0.2": 95916.22172692753, "q_0.25": 99357.95567112432, "q_0.3": 102536.84600462276, "q_0.35": 107098.64774228165, "q_0.4": 110719.25086676572, "q_0.45": 114551.45647597821, "q_0.5": 118265.58011391778, "q_0.55": 121280.24248803037, "q_0.6": 126146.76531286116, "q_0.65": 130750.30666996865, "q_0.7": 135089.31381046723, "q_0.75": 140049.37984976062, "q_0.8": 150427.01791315834, "q_0.85": 160529.7906348027, "q_0.9": 170172.95298827803, "q_0.95": 188058.57463884758, "q_1": 274539.39464668976, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.64043323340779, 38.326874184739815], [-119.63325464522191, 38.1990316470926], [-119.55070088108417, 38.14370483458141], [-119.3532897059722, 38.0856922544726], [-119.32098605913569, 37.96805563369638], [-119.19895005997557, 37.88533399168936], [-119.20253935406852, 37.79509220040897], [-119.27073594183447, 37.73922823437826], [-119.31021817685686, 37.77790328778414], [-119.53275441061945, 37.90306005783372], [-119.6655582920584, 37.80046373560424], [-119.90604099628571, 37.757491454042146], [-120.08191640684001, 37.827858565100065], [-120.26138111148725, 37.73331954566348], [-120.34752416971793, 37.72687370342916], [-120.39059569883327, 37.63448329807067], [-120.65620346171119, 37.83108148621722], [-120.51981028617928, 37.951941028110596], [-120.27214899376608, 38.27047306518958], [-120.14293440642007, 38.394018374680584], [-120.02089840725995, 38.437527809762194], [-119.88450523172804, 38.35910339591138], [-119.75170135028908, 38.416578822500675], [-119.64043323340779, 38.326874184739815]]]}}, {"county_fips": 6041, "Latitude": 38.1, "Longitude": -122.49, "Population": 194484.0, "q_0": 153552.80490425948, "q_0.05": 216809.33362127477, "q_0.1": 237227.80912568644, "q_0.15": 251921.19499804612, "q_0.2": 263528.69091544807, "q_0.25": 274046.38605103764, "q_0.3": 284255.2470897349, "q_0.35": 292239.871814648, "q_0.4": 300648.0188858724, "q_0.45": 309944.6465827523, "q_0.5": 318712.64300405176, "q_0.55": 328246.7599753707, "q_0.6": 337119.6139939532, "q_0.65": 348674.74286316615, "q_0.7": 358639.3505532589, "q_0.75": 369571.87892320193, "q_0.8": 382186.0567799922, "q_0.85": 395630.176416569, "q_0.9": 414628.3237340861, "q_0.95": 435675.3514561609, "q_1": 472289.5497161719, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-122.55135074278607, 38.15820797960862], [-122.48674344911306, 38.106104088214586], [-122.50827921367073, 37.928843426770975], [-122.44008262590478, 37.88049961001363], [-122.5298149782284, 37.81926410878765], [-122.81695850566399, 37.993301849114104], [-122.93899450482411, 38.037348437715245], [-123.00719109259006, 38.008879301180365], [-122.95694097528884, 38.11845861916369], [-123.00719109259006, 38.29625643412683], [-122.89592297570877, 38.312371039712616], [-122.74158332971214, 38.207088949885495], [-122.55135074278607, 38.15820797960862]]]]}}, {"county_fips": 6077, "Latitude": 37.96, "Longitude": -121.28, "Population": 477524.0, "q_0": 68367.89271324582, "q_0.05": 85136.17157462242, "q_0.1": 91804.79178009901, "q_0.15": 96130.1552592121, "q_0.2": 99908.62721036011, "q_0.25": 103624.72383587003, "q_0.3": 107052.09470099933, "q_0.35": 110296.51816453204, "q_0.4": 113658.83570249872, "q_0.45": 117292.52303549141, "q_0.5": 121037.68595923975, "q_0.55": 124905.85549836239, "q_0.6": 129028.27852840905, "q_0.65": 133475.33212152688, "q_0.7": 138716.7218108409, "q_0.75": 144667.93709007296, "q_0.8": 152562.0421926437, "q_0.85": 161515.70828890274, "q_0.9": 174827.4791403155, "q_0.95": 199411.30943575606, "q_1": 273618.74775508663, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.0259007532845, 38.29786789468541], [-120.99359710644801, 38.22535216954938], [-120.92540051868205, 38.077634951679705], [-120.9218112245891, 37.73922823437826], [-121.00077569463389, 37.76017722163978], [-121.15511534063052, 37.71989070767532], [-121.47097322080967, 37.48193169852526], [-121.55711627904034, 37.54155573919265], [-121.55711627904034, 37.81657834119002], [-121.58224133769096, 38.0405713588324], [-121.57506274950507, 38.10878985581222], [-121.47097322080967, 38.25972999479905], [-121.34175863346366, 38.22857509066654], [-121.0259007532845, 38.29786789468541]]]}}, {"county_fips": 6013, "Latitude": 37.88, "Longitude": -122.23, "Population": 838087.0, "q_0": 129233.49019851162, "q_0.05": 168053.8275441571, "q_0.1": 182072.23203080348, "q_0.15": 190998.957958422, "q_0.2": 199105.3743453842, "q_0.25": 205415.0273077258, "q_0.3": 210952.48857254675, "q_0.35": 216376.44139808873, "q_0.4": 221875.77001790985, "q_0.45": 227120.70045472606, "q_0.5": 232887.24792414153, "q_0.55": 238399.55511062694, "q_0.6": 244269.23945246736, "q_0.65": 250508.67005454088, "q_0.7": 257330.23927826108, "q_0.75": 264894.8019531385, "q_0.8": 274326.9542252773, "q_0.85": 287413.8860558629, "q_0.9": 303403.07934951864, "q_0.95": 329979.0148763791, "q_1": 396409.3397069755, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-121.58224133769096, 38.0405713588324], [-121.55711627904034, 37.81657834119002], [-121.96270651154312, 37.71827924711674], [-122.04526027568085, 37.79831512152613], [-122.13858192209742, 37.803686656721396], [-122.31086803855877, 37.89768852263846], [-122.39701109678944, 37.95247818163013], [-122.24626074488576, 38.058297424976764], [-122.15652839256214, 38.023919599727094], [-122.03090309930907, 38.05776027145724], [-121.77965251280293, 38.014787989895154], [-121.60377710224863, 38.10073255301933], [-121.58224133769096, 38.0405713588324]]]]}}, {"county_fips": 6099, "Latitude": 37.92, "Longitude": -120.84, "Population": 370481.0, "q_0": 70618.53833260006, "q_0.05": 87608.3321546854, "q_0.1": 93260.45921383283, "q_0.15": 98286.1807218184, "q_0.2": 102491.98868497979, "q_0.25": 106327.95737163309, "q_0.3": 109421.31483125991, "q_0.35": 112717.30362690664, "q_0.4": 115981.5475557451, "q_0.45": 119260.67243664317, "q_0.5": 122664.06671327274, "q_0.55": 126026.69205708255, "q_0.6": 129981.3169906149, "q_0.65": 134921.2516836221, "q_0.7": 139342.43323139378, "q_0.75": 144821.9541231534, "q_0.8": 152183.20030986745, "q_0.85": 160650.45188282258, "q_0.9": 173225.14147662095, "q_0.95": 193651.32180597656, "q_1": 268802.50848491554, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.39059569883327, 37.63448329807067], [-120.98282922416917, 37.400821517076814], [-120.96488275370444, 37.34334609048752], [-121.23049051658236, 37.136541985469975], [-121.2807406338836, 37.18220003462969], [-121.40636592713666, 37.15587951217291], [-121.4566160444379, 37.28372204982013], [-121.40636592713666, 37.31057972579643], [-121.47097322080967, 37.48193169852526], [-121.15511534063052, 37.71989070767532], [-121.00077569463389, 37.76017722163978], [-120.9218112245891, 37.73922823437826], [-120.92540051868205, 38.077634951679705], [-120.65620346171119, 37.83108148621722], [-120.39059569883327, 37.63448329807067]]]}}, {"county_fips": 6001, "Latitude": 37.85, "Longitude": -122.24, "Population": 1179304.0, "q_0": 113662.44606055775, "q_0.05": 153626.62373086158, "q_0.1": 168881.5099355213, "q_0.15": 178640.1241986799, "q_0.2": 186060.86474395066, "q_0.25": 192254.65159195595, "q_0.3": 197868.1674784449, "q_0.35": 202757.15980688608, "q_0.4": 207790.53856935955, "q_0.45": 212582.22940988923, "q_0.5": 217595.17923919533, "q_0.55": 223090.79868248562, "q_0.6": 229032.89918172074, "q_0.65": 235192.20643354047, "q_0.7": 241552.563066775, "q_0.75": 249542.6335618297, "q_0.8": 260035.25836951289, "q_0.85": 273183.5664510592, "q_0.9": 291264.31987587595, "q_0.95": 319184.193869562, "q_1": 403776.762109685, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-121.55711627904034, 37.81657834119002], [-121.55711627904034, 37.54155573919265], [-121.47097322080967, 37.48193169852526], [-121.8657955710336, 37.484617466122884], [-121.98783157019373, 37.46259417182232], [-122.1134568634468, 37.50288068578678], [-122.16011768665508, 37.66563820220318], [-122.32881450902349, 37.79885227504566], [-122.31086803855877, 37.89768852263846], [-122.13858192209742, 37.803686656721396], [-122.04526027568085, 37.79831512152613], [-121.96270651154312, 37.71827924711674], [-121.55711627904034, 37.81657834119002]]]]}}, {"county_fips": 6043, "Latitude": 37.53, "Longitude": -120.19, "Population": 14302.0, "q_0": 56695.93763110055, "q_0.05": 69136.54873444274, "q_0.1": 77642.60383163195, "q_0.15": 82270.84149070061, "q_0.2": 85537.22696126415, "q_0.25": 88859.63851209621, "q_0.3": 91705.28667319256, "q_0.35": 96378.84876241085, "q_0.4": 99888.61417983499, "q_0.45": 102186.25681722836, "q_0.5": 104555.67053558942, "q_0.55": 107962.75066424276, "q_0.6": 111278.45056635435, "q_0.65": 113866.69346944483, "q_0.7": 117422.64019018319, "q_0.75": 122247.00741155083, "q_0.8": 128661.24318277164, "q_0.85": 134797.91008250593, "q_0.9": 143848.56593483433, "q_0.95": 162940.74569990207, "q_1": 223499.8951195637, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.31021817685686, 37.77790328778414], [-119.58300452792068, 37.56035611237607], [-119.65120111568663, 37.416398969143074], [-119.76246923256792, 37.4169361226626], [-120.04602346591057, 37.18488580222732], [-120.17882734734953, 37.261698755519554], [-120.39059569883327, 37.63448329807067], [-120.34752416971793, 37.72687370342916], [-120.26138111148725, 37.73331954566348], [-120.08191640684001, 37.827858565100065], [-119.90604099628571, 37.757491454042146], [-119.6655582920584, 37.80046373560424], [-119.53275441061945, 37.90306005783372], [-119.31021817685686, 37.77790328778414]]]}}, {"county_fips": 6075, "Latitude": 37.8, "Longitude": -122.42, "Population": 575214.0, "q_0": 164424.53992774864, "q_0.05": 228661.35073033688, "q_0.1": 251610.99914814314, "q_0.15": 267582.17141968035, "q_0.2": 280128.17301247886, "q_0.25": 289834.93100220093, "q_0.3": 296980.193913048, "q_0.35": 304218.0436007295, "q_0.4": 311339.7043691565, "q_0.45": 318111.5722392014, "q_0.5": 324437.1853744867, "q_0.55": 330863.23366955604, "q_0.6": 338602.30773938046, "q_0.65": 346992.56221328065, "q_0.7": 354532.9550224786, "q_0.75": 363184.5257712782, "q_0.8": 373226.94693766144, "q_0.85": 384413.20125162107, "q_0.9": 398588.5283049439, "q_0.95": 418621.42987427284, "q_1": 467326.8391885454, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-122.39701109678944, 37.708073330245746], [-122.50110062548484, 37.708073330245746], [-122.51186850776368, 37.77521752018651], [-122.41495756725416, 37.8101324989557], [-122.39701109678944, 37.708073330245746]]]]}}, {"county_fips": 6039, "Latitude": 36.85, "Longitude": -119.88, "Population": 90624.0, "q_0": 59934.19655941031, "q_0.05": 72670.99758342162, "q_0.1": 76814.64406779662, "q_0.15": 80602.25871733757, "q_0.2": 82415.07463806497, "q_0.25": 84436.44508077331, "q_0.3": 87564.68434410311, "q_0.35": 89840.23309498587, "q_0.4": 91742.86043432204, "q_0.45": 94150.19607388771, "q_0.5": 96597.73320533193, "q_0.55": 99196.5165850106, "q_0.6": 101631.17280190678, "q_0.65": 104365.33968926554, "q_0.7": 108269.12290342514, "q_0.75": 113163.36344676907, "q_0.8": 118015.38647598871, "q_0.85": 126346.67471089333, "q_0.9": 139439.75275865116, "q_0.95": 159861.8772019553, "q_1": 238198.19084348518, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.27073594183447, 37.73922823437826], [-119.11639629583784, 37.73009662454632], [-119.02307464942128, 37.585602327793794], [-119.28509311820625, 37.37664960869814], [-119.38559335280871, 37.149433669938595], [-119.53993299880534, 37.096255471505515], [-119.73375487982436, 36.97915600424882], [-119.81630864396209, 36.85346208067971], [-120.1931845237213, 36.776649127387486], [-120.3690599342756, 36.78470643018037], [-120.5449353448299, 37.04415158011148], [-120.47673875706394, 37.096255471505515], [-120.29009546423082, 37.15265659105575], [-120.04602346591057, 37.18488580222732], [-119.76246923256792, 37.4169361226626], [-119.65120111568663, 37.416398969143074], [-119.58300452792068, 37.56035611237607], [-119.31021817685686, 37.77790328778414], [-119.27073594183447, 37.73922823437826]]]}}, {"county_fips": 6081, "Latitude": 37.68, "Longitude": -122.4, "Population": 608919.0, "q_0": 174079.42728343178, "q_0.05": 230243.3087902496, "q_0.1": 252260.63195268993, "q_0.15": 265979.3306842946, "q_0.2": 275912.88095789426, "q_0.25": 285093.59512184706, "q_0.3": 293265.10770759324, "q_0.35": 299739.9054488364, "q_0.4": 305656.81754650455, "q_0.45": 312557.783354929, "q_0.5": 319099.96743737673, "q_0.55": 325720.20188974234, "q_0.6": 332843.74493651866, "q_0.65": 338921.6506076342, "q_0.7": 346404.74838689546, "q_0.75": 354977.9941987358, "q_0.8": 365842.98977203865, "q_0.85": 378256.81356609, "q_0.9": 393593.9794443925, "q_0.95": 416995.28322913224, "q_1": 462319.7087904958, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-122.39701109678944, 37.708073330245746], [-122.36111815586, 37.59258532354763], [-122.26061792125753, 37.572710643325166], [-122.11704615753975, 37.465817092939474], [-122.19242133349158, 37.433587881767906], [-122.15652839256214, 37.286407817417754], [-122.15652839256214, 37.216040706359834], [-122.3216359208376, 37.187571569824954], [-122.29292156809404, 37.107535695415564], [-122.42213615544006, 37.239138307699456], [-122.40060039088239, 37.35999784959283], [-122.45085050818362, 37.48032023796668], [-122.51545780185663, 37.517383830813976], [-122.50110062548484, 37.708073330245746], [-122.39701109678944, 37.708073330245746]]]}}, {"county_fips": 6047, "Latitude": 37.51, "Longitude": -120.46, "Population": 176457.0, "q_0": 55663.01421876151, "q_0.05": 68815.08962523448, "q_0.1": 73757.07736162351, "q_0.15": 77664.33516380761, "q_0.2": 81030.44639770595, "q_0.25": 83766.60815382784, "q_0.3": 86843.25756416577, "q_0.35": 89480.66282437081, "q_0.4": 92177.32818760378, "q_0.45": 95351.62830037913, "q_0.5": 98691.79771842432, "q_0.55": 101497.43436077911, "q_0.6": 105717.74471967675, "q_0.65": 110294.1781850536, "q_0.7": 116039.29586244808, "q_0.75": 122319.3287883167, "q_0.8": 129503.96232509903, "q_0.85": 138875.88636324994, "q_0.9": 150807.14740701704, "q_0.95": 169963.65666989688, "q_1": 247305.50563026685, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.04602346591057, 37.18488580222732], [-120.29009546423082, 37.15265659105575], [-120.47673875706394, 37.096255471505515], [-120.5449353448299, 37.04415158011148], [-120.9218112245891, 36.74119699509876], [-121.14434745835169, 36.838958935652514], [-121.21613334021059, 36.96142993810446], [-121.23049051658236, 37.136541985469975], [-120.96488275370444, 37.34334609048752], [-120.98282922416917, 37.400821517076814], [-120.39059569883327, 37.63448329807067], [-120.17882734734953, 37.261698755519554], [-120.04602346591057, 37.18488580222732]]]}}, {"county_fips": 6019, "Latitude": 36.73, "Longitude": -119.81, "Population": 657623.0, "q_0": 54990.30809445534, "q_0.05": 65626.12351605706, "q_0.1": 69668.65307326538, "q_0.15": 73227.67562113855, "q_0.2": 76693.87713020986, "q_0.25": 79696.99911651509, "q_0.3": 81835.76803122762, "q_0.35": 84161.83231121782, "q_0.4": 86691.35291800926, "q_0.45": 89259.63549784603, "q_0.5": 92240.97999917886, "q_0.55": 95633.75193690002, "q_0.6": 98877.30994810097, "q_0.65": 102270.00135792088, "q_0.7": 106263.01744312471, "q_0.75": 110951.39741766939, "q_0.8": 116534.33030687796, "q_0.85": 123623.93130106457, "q_0.9": 134071.8579231566, "q_0.95": 152134.9694971891, "q_1": 218433.86316932345, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-118.77900265110102, 37.46313132534184], [-118.78618123928692, 37.34334609048752], [-118.66773453421973, 37.26116160200003], [-118.66773453421973, 37.15373089809481], [-118.43443041817832, 37.056506111060585], [-118.36264453631942, 36.84379331732825], [-118.36982312450532, 36.747105683813544], [-118.98359241439888, 36.74280845565734], [-118.98359241439888, 36.65847535309174], [-119.30303958867097, 36.66008681365032], [-119.31021817685686, 36.57467940404567], [-119.47173641103939, 36.57521655756519], [-119.57941523382773, 36.48873484092149], [-119.6655582920584, 36.41836772986357], [-119.95988040767989, 36.399030203160635], [-119.95988040767989, 36.18148302775256], [-120.31522052288142, 35.90646042575519], [-120.64184628533941, 36.10144715334317], [-120.63107840306057, 36.20511778261171], [-120.67773922626886, 36.267427590876736], [-120.59518546213113, 36.328663092102715], [-120.59518546213113, 36.488197687401964], [-120.9218112245891, 36.74119699509876], [-120.5449353448299, 37.04415158011148], [-120.3690599342756, 36.78470643018037], [-120.1931845237213, 36.776649127387486], [-119.81630864396209, 36.85346208067971], [-119.73375487982436, 36.97915600424882], [-119.53993299880534, 37.096255471505515], [-119.38559335280871, 37.149433669938595], [-119.28509311820625, 37.37664960869814], [-119.02307464942128, 37.585602327793794], [-118.77900265110102, 37.46313132534184]]]}}, {"county_fips": 6085, "Latitude": 37.47, "Longitude": -121.92, "Population": 1489953.0, "q_0": 147551.32058460906, "q_0.05": 201102.40577575265, "q_0.1": 219406.9133866639, "q_0.15": 230668.26916224873, "q_0.2": 239545.44782526695, "q_0.25": 246773.06105091906, "q_0.3": 252970.29085548336, "q_0.35": 258979.27660268478, "q_0.4": 264534.4901241851, "q_0.45": 269936.05388425005, "q_0.5": 275150.3201624481, "q_0.55": 280389.3349749959, "q_0.6": 286011.0961031657, "q_0.65": 291915.3463583751, "q_0.7": 298970.02992846083, "q_0.75": 306195.8019882171, "q_0.8": 314928.67082787177, "q_0.85": 326036.5458049683, "q_0.9": 342132.4751788815, "q_0.95": 367456.19695651473, "q_1": 435953.9271117948, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.47097322080967, 37.48193169852526], [-121.40636592713666, 37.31057972579643], [-121.4566160444379, 37.28372204982013], [-121.40636592713666, 37.15587951217291], [-121.2807406338836, 37.18220003462969], [-121.23049051658236, 37.136541985469975], [-121.21613334021059, 36.96142993810446], [-121.48891969127439, 36.98291607888551], [-121.58224133769096, 36.90073159039801], [-121.75452745415231, 37.046300194189584], [-122.02731380521612, 37.166622582563434], [-122.15652839256214, 37.286407817417754], [-122.19242133349158, 37.433587881767906], [-122.11704615753975, 37.465817092939474], [-121.98783157019373, 37.46259417182232], [-121.8657955710336, 37.484617466122884], [-121.47097322080967, 37.48193169852526]]]}}, {"county_fips": 6027, "Latitude": 37.35, "Longitude": -118.18, "Population": 18281.0, "q_0": 49724.29298178437, "q_0.05": 63209.46091570483, "q_0.1": 68575.8552595591, "q_0.15": 72676.71161315027, "q_0.2": 76381.77123789726, "q_0.25": 81612.05623324764, "q_0.3": 86698.15436792298, "q_0.35": 91563.01487883595, "q_0.4": 95824.09386795033, "q_0.45": 99108.33980635632, "q_0.5": 102389.30310158088, "q_0.55": 106705.52376784642, "q_0.6": 111031.49937093157, "q_0.65": 115621.89185493135, "q_0.7": 120653.7240851157, "q_0.75": 129228.92757507795, "q_0.8": 138069.40539357802, "q_0.85": 150319.40867567417, "q_0.9": 166100.4769979761, "q_0.95": 195132.8617143482, "q_1": 300716.3786444943, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-117.83501830465653, 37.46474278590042], [-117.16740960336878, 36.97109870145593], [-115.89321020037336, 36.00099944519179], [-115.65272749614606, 35.810309945760025], [-115.73528126028378, 35.79526964721329], [-116.7043906653789, 35.79526964721329], [-117.63760712954456, 35.79580680073282], [-118.00730442111788, 35.78667519090087], [-117.98217936246726, 35.92579795245813], [-118.01807230339672, 35.9558785495516], [-118.0970367734415, 36.33134885970034], [-118.21548347850869, 36.43394518192983], [-118.36982312450532, 36.747105683813544], [-118.36264453631942, 36.84379331732825], [-118.43443041817832, 37.056506111060585], [-118.66773453421973, 37.15373089809481], [-118.66773453421973, 37.26116160200003], [-118.78618123928692, 37.34334609048752], [-118.77900265110102, 37.46313132534184], [-117.83501830465653, 37.46474278590042]]]}}, {"county_fips": 6087, "Latitude": 37.13, "Longitude": -121.96, "Population": 216957.0, "q_0": 109297.52780043971, "q_0.05": 159981.8186553096, "q_0.1": 178112.06879704274, "q_0.15": 190065.25134012732, "q_0.2": 200140.13599469018, "q_0.25": 208326.7825882548, "q_0.3": 215925.73461561507, "q_0.35": 222476.7124591509, "q_0.4": 228675.25631807224, "q_0.45": 234842.77083938292, "q_0.5": 241410.98792848352, "q_0.55": 248045.51408712327, "q_0.6": 255039.90621183, "q_0.65": 262153.20129564847, "q_0.7": 270059.50637038675, "q_0.75": 278692.7031393318, "q_0.8": 288172.7543476357, "q_0.85": 302915.6665376088, "q_0.9": 318652.12262844713, "q_0.95": 342968.5500087575, "q_1": 420033.0023368686, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.58224133769096, 36.90073159039801], [-121.64325933727102, 36.89536005520275], [-121.74375957187348, 36.90932604671043], [-121.80477757145354, 36.85507354123829], [-121.88374204149832, 36.949612560674886], [-122.1062782752609, 36.95444694235062], [-122.29292156809404, 37.107535695415564], [-122.3216359208376, 37.187571569824954], [-122.15652839256214, 37.216040706359834], [-122.15652839256214, 37.286407817417754], [-122.02731380521612, 37.166622582563434], [-121.75452745415231, 37.046300194189584], [-121.58224133769096, 36.90073159039801]]]}}, {"county_fips": 6069, "Latitude": 36.9, "Longitude": -121.29, "Population": 36697.0, "q_0": 85061.74891680518, "q_0.05": 110694.44900128077, "q_0.1": 126544.54941820857, "q_0.15": 136556.31850014988, "q_0.2": 146127.44420524838, "q_0.25": 154829.68975665586, "q_0.3": 161099.42938114834, "q_0.35": 168363.70915878683, "q_0.4": 175164.17309316839, "q_0.45": 183971.23961086737, "q_0.5": 190393.8128457367, "q_0.55": 195339.63321252418, "q_0.6": 200207.5259558002, "q_0.65": 206615.63193176556, "q_0.7": 215039.44355124398, "q_0.75": 223745.3381747827, "q_0.8": 236517.39324740443, "q_0.85": 251314.20865465843, "q_0.9": 268820.79431288666, "q_0.95": 298110.1446712265, "q_1": 383371.9975202333, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.21613334021059, 36.96142993810446], [-121.14434745835169, 36.838958935652514], [-120.9218112245891, 36.74119699509876], [-120.59518546213113, 36.488197687401964], [-120.59518546213113, 36.328663092102715], [-120.67773922626886, 36.267427590876736], [-120.74952510812776, 36.31039987243882], [-120.70645357901242, 36.202432015014075], [-120.92540051868205, 36.309325565399774], [-121.0259007532845, 36.259907441603374], [-121.04384722374922, 36.32329155690745], [-121.23049051658236, 36.47208308181618], [-121.30945498662714, 36.50001506483154], [-121.32022286890599, 36.61174299689297], [-121.47097322080967, 36.688555950185204], [-121.45302675034495, 36.720785161356766], [-121.64325933727102, 36.89536005520275], [-121.58224133769096, 36.90073159039801], [-121.48891969127439, 36.98291607888551], [-121.21613334021059, 36.96142993810446]]]}}, {"county_fips": 6053, "Latitude": 36.72, "Longitude": -121.64, "Population": 327367.0, "q_0": 87610.20261663516, "q_0.05": 122267.13607052635, "q_0.1": 139719.30722705708, "q_0.15": 152638.01338864333, "q_0.2": 161968.31204428058, "q_0.25": 169635.24363863797, "q_0.3": 176070.18525080415, "q_0.35": 181619.79380939435, "q_0.4": 187713.36400736787, "q_0.45": 194032.22546866362, "q_0.5": 199783.9297027495, "q_0.55": 205581.61019589636, "q_0.6": 211015.0773779886, "q_0.65": 216264.683844126, "q_0.7": 222733.94532741542, "q_0.75": 229731.40981910212, "q_0.8": 239998.096463602, "q_0.85": 250444.44054532066, "q_0.9": 269704.0517966075, "q_0.95": 297322.1691796974, "q_1": 378476.6946790605, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-121.64325933727102, 36.89536005520275], [-121.45302675034495, 36.720785161356766], [-121.47097322080967, 36.688555950185204], [-121.32022286890599, 36.61174299689297], [-121.30945498662714, 36.50001506483154], [-121.23049051658236, 36.47208308181618], [-121.04384722374922, 36.32329155690745], [-121.0259007532845, 36.259907441603374], [-120.92540051868205, 36.309325565399774], [-120.70645357901242, 36.202432015014075], [-120.74952510812776, 36.31039987243882], [-120.67773922626886, 36.267427590876736], [-120.63107840306057, 36.20511778261171], [-120.64184628533941, 36.10144715334317], [-120.31522052288142, 35.90646042575519], [-120.21472028827897, 35.78828665145945], [-121.3453479275566, 35.79526964721329], [-121.46379463262377, 35.88336282441557], [-121.514044749925, 36.0074452874261], [-121.57506274950507, 36.02463420005094], [-121.71504521912992, 36.19437471222118], [-121.89809921787011, 36.30449118372404], [-121.97706368791489, 36.57843947868235], [-121.82272404191826, 36.65686389253316], [-121.80477757145354, 36.85507354123829], [-121.74375957187348, 36.90932604671043], [-121.64325933727102, 36.89536005520275]]]}}, {"county_fips": 6107, "Latitude": 36.52, "Longitude": -119.54, "Population": 318394.0, "q_0": 49016.292938937295, "q_0.05": 58485.156786874126, "q_0.1": 61864.598610526584, "q_0.15": 64065.50040201763, "q_0.2": 65974.96196536366, "q_0.25": 67600.21042796032, "q_0.3": 69058.99660169476, "q_0.35": 70601.71502603692, "q_0.4": 72311.98532007512, "q_0.45": 74036.32112728254, "q_0.5": 75793.29596035101, "q_0.55": 77862.48642876436, "q_0.6": 79858.37451082621, "q_0.65": 82096.08395258704, "q_0.7": 85201.54705804758, "q_0.75": 88522.268946651, "q_0.8": 92711.4088016734, "q_0.85": 97439.27154406175, "q_0.9": 103964.71888289353, "q_0.95": 116355.89869783976, "q_1": 164624.63722306324, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-118.00730442111788, 35.78667519090087], [-119.53993299880534, 35.78989811201803], [-119.53275441061945, 36.269039051435314], [-119.47891499922528, 36.26796474439626], [-119.47532570513232, 36.40064166371921], [-119.57941523382773, 36.48873484092149], [-119.47173641103939, 36.57521655756519], [-119.31021817685686, 36.57467940404567], [-119.30303958867097, 36.66008681365032], [-118.98359241439888, 36.65847535309174], [-118.98359241439888, 36.74280845565734], [-118.36982312450532, 36.747105683813544], [-118.21548347850869, 36.43394518192983], [-118.0970367734415, 36.33134885970034], [-118.01807230339672, 35.9558785495516], [-117.98217936246726, 35.92579795245813], [-118.00730442111788, 35.78667519090087]]]}}, {"county_fips": 6031, "Latitude": 36.41, "Longitude": -119.69, "Population": 91842.0, "q_0": 46424.48988480216, "q_0.05": 55759.90276779687, "q_0.1": 59010.13599442521, "q_0.15": 61549.85170183576, "q_0.2": 63786.125737679926, "q_0.25": 65857.2948650944, "q_0.3": 67734.46288190589, "q_0.35": 69633.25765989417, "q_0.4": 71513.87012477951, "q_0.45": 73626.12170902202, "q_0.5": 75617.05320006097, "q_0.55": 77998.79799002635, "q_0.6": 80158.30339060561, "q_0.65": 82540.2606650552, "q_0.7": 85270.89196663836, "q_0.75": 88839.97626358311, "q_0.8": 94529.63916291021, "q_0.85": 100902.79147884408, "q_0.9": 108833.86174081577, "q_0.95": 125827.44461139782, "q_1": 193976.1515102023, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-119.53993299880534, 35.78989811201803], [-120.1931845237213, 35.788823804978975], [-120.21472028827897, 35.78828665145945], [-120.31522052288142, 35.90646042575519], [-119.95988040767989, 36.18148302775256], [-119.95988040767989, 36.399030203160635], [-119.6655582920584, 36.41836772986357], [-119.57941523382773, 36.48873484092149], [-119.47532570513232, 36.40064166371921], [-119.47891499922528, 36.26796474439626], [-119.53275441061945, 36.269039051435314], [-119.53993299880534, 35.78989811201803]]]}}, {"county_fips": 6071, "Latitude": 34.09, "Longitude": -117.71, "Population": 1400497.0, "q_0": 80584.85750344342, "q_0.05": 99169.11648864653, "q_0.1": 106284.40685699433, "q_0.15": 110846.95027193917, "q_0.2": 114448.61636976016, "q_0.25": 117759.70764307243, "q_0.3": 120460.89031251048, "q_0.35": 123376.54185978264, "q_0.4": 126223.99822348781, "q_0.45": 128920.98787073446, "q_0.5": 131639.7113310489, "q_0.55": 134653.7668422353, "q_0.6": 137802.56383483863, "q_0.65": 141228.43183169974, "q_0.7": 145462.69923462885, "q_0.75": 150116.76435151236, "q_0.8": 156453.3049491716, "q_0.85": 164182.30072395725, "q_0.9": 175278.68787444747, "q_0.95": 195351.8891787344, "q_1": 268867.81451656093, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-114.63336797374971, 35.00081959183419], [-114.63695726784266, 34.87458851474555], [-114.46826044547426, 34.71075669129009], [-114.33904585812824, 34.45077438783945], [-114.13804538892333, 34.303057169969776], [-114.2564920939905, 34.17414032528351], [-114.4323675045448, 34.087658608639806], [-115.31533385140924, 34.08121276640549], [-115.31533385140924, 34.03770333132388], [-116.93051619323442, 34.034480410206726], [-116.93051619323442, 34.00439981311326], [-117.22842760294884, 34.00439981311326], [-117.55864265949978, 34.03286894964815], [-117.673500070474, 33.870111433231735], [-117.7847681873553, 33.94531292596539], [-117.73451807005407, 34.020514418699044], [-117.64837501182339, 34.287479717903516], [-117.66991077638107, 34.55927939878373], [-117.66991077638107, 34.823021776871045], [-117.63401783545162, 34.823021776871045], [-117.63760712954456, 35.79580680073282], [-116.7043906653789, 35.79526964721329], [-115.73528126028378, 35.79526964721329], [-115.65272749614606, 35.810309945760025], [-114.63336797374971, 35.00081959183419]]]}}, {"county_fips": 6079, "Latitude": 35.69, "Longitude": -120.9, "Population": 200262.0, "q_0": 71456.2243461066, "q_0.05": 102909.00899821235, "q_0.1": 119815.8526330507, "q_0.15": 133898.24145369566, "q_0.2": 144226.9237299138, "q_0.25": 153941.26706514467, "q_0.3": 162954.10217614923, "q_0.35": 172717.01683294884, "q_0.4": 179848.07192577724, "q_0.45": 187264.22052111733, "q_0.5": 195712.0769292227, "q_0.55": 203249.92904295374, "q_0.6": 210697.72837582766, "q_0.65": 218328.85572400157, "q_0.7": 228228.01296401714, "q_0.75": 237938.31655031908, "q_0.8": 249942.9915510681, "q_0.85": 263802.1068118265, "q_0.9": 278750.21273631544, "q_0.95": 304714.9004354296, "q_1": 369541.1732180843, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-120.21472028827897, 35.78828665145945], [-120.1931845237213, 35.788823804978975], [-120.19677381781425, 35.615323218172044], [-120.0890949950259, 35.613711757613466], [-120.0890949950259, 35.52723004096976], [-119.99936264270228, 35.43913686376749], [-119.88450523172804, 35.43752540320891], [-119.88450523172804, 35.34996937952615], [-119.81630864396209, 35.351043686565205], [-119.81630864396209, 35.26348766288245], [-119.66914758615135, 35.26187620232387], [-119.66914758615135, 35.17485733216064], [-119.55429017517712, 35.17861740679732], [-119.56146876336301, 35.08837561551694], [-119.47532570513232, 35.07709539160689], [-119.47532570513232, 34.89983473016328], [-119.74093346801024, 34.9723504552993], [-120.10345217139768, 35.11308467741514], [-120.21113099418602, 35.02338003965428], [-120.33316699334615, 34.99383659608034], [-120.2972740524167, 34.90842918647569], [-120.45879228659922, 34.9970595171975], [-120.64902487352529, 34.97503622289693], [-120.63107840306057, 35.11308467741514], [-120.89668616593849, 35.24683590377714], [-120.82848957817254, 35.33492908097942], [-120.90745404821733, 35.44880562711896], [-121.00795428281978, 35.461160158068054], [-121.17306181109524, 35.6389579730312], [-121.29150851616242, 35.66474134196845], [-121.3453479275566, 35.79526964721329], [-120.21472028827897, 35.78828665145945]]]}}, {"county_fips": 6029, "Latitude": 35.42, "Longitude": -119.02, "Population": 521777.0, "q_0": 53097.93861553882, "q_0.05": 65407.66251674566, "q_0.1": 70154.9561594321, "q_0.15": 73718.24538068945, "q_0.2": 76922.23244796149, "q_0.25": 79744.99194100162, "q_0.3": 82109.29507414087, "q_0.35": 84814.13403043829, "q_0.4": 87304.58321658487, "q_0.45": 89354.22301481284, "q_0.5": 92677.55222441771, "q_0.55": 95801.51888067124, "q_0.6": 99134.96470139542, "q_0.65": 103100.89962186912, "q_0.7": 107031.91784421314, "q_0.75": 111995.45417295129, "q_0.8": 117666.24793350416, "q_0.85": 126290.18280606465, "q_0.9": 138937.05536656466, "q_0.95": 159291.80274523405, "q_1": 237546.2620468131, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-117.63760712954456, 35.79580680073282], [-117.63401783545162, 34.823021776871045], [-117.66991077638107, 34.823021776871045], [-118.89386006207526, 34.81818739519531], [-118.88309217979642, 34.78810679810184], [-118.97641382621299, 34.81227870648052], [-119.24561088318386, 34.8138901670391], [-119.27791453002035, 34.87888574290176], [-119.44302205829582, 34.89876042312422], [-119.47532570513232, 34.89983473016328], [-119.47532570513232, 35.07709539160689], [-119.56146876336301, 35.08837561551694], [-119.55429017517712, 35.17861740679732], [-119.66914758615135, 35.17485733216064], [-119.66914758615135, 35.26187620232387], [-119.81630864396209, 35.26348766288245], [-119.81630864396209, 35.351043686565205], [-119.88450523172804, 35.34996937952615], [-119.88450523172804, 35.43752540320891], [-119.99936264270228, 35.43913686376749], [-120.0890949950259, 35.52723004096976], [-120.0890949950259, 35.613711757613466], [-120.19677381781425, 35.615323218172044], [-120.1931845237213, 35.788823804978975], [-119.53993299880534, 35.78989811201803], [-118.00730442111788, 35.78667519090087], [-117.63760712954456, 35.79580680073282]]]}}, {"county_fips": 6083, "Latitude": 34.44, "Longitude": -119.77, "Population": 323681.0, "q_0": 92984.76533685943, "q_0.05": 137605.33143434432, "q_0.1": 154648.4255424322, "q_0.15": 165177.4467639435, "q_0.2": 174300.63328091547, "q_0.25": 182935.51062929243, "q_0.3": 190225.7928114409, "q_0.35": 196311.49167853536, "q_0.4": 202607.05763699446, "q_0.45": 210282.63073519917, "q_0.5": 217098.69008066584, "q_0.55": 223470.98280714653, "q_0.6": 230465.91516647564, "q_0.65": 238204.53152641025, "q_0.7": 246304.12376691867, "q_0.75": 257916.1904004251, "q_0.8": 269341.4984660823, "q_0.85": 284173.1860909352, "q_0.9": 304911.36241083045, "q_0.95": 339041.79724033846, "q_1": 421021.81421831984, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-120.11422005367652, 33.89374618809089], [-120.23625605283664, 34.00869704126947], [-120.04243417181762, 34.03555471724577], [-120.00295193679523, 33.94155285132871], [-120.11422005367652, 33.89374618809089]]], [[[-119.76605852666086, 33.95874176395354], [-119.87732664354215, 33.98345082585174], [-119.92039817265749, 34.077989845288336], [-119.55787946927006, 33.99634251032037], [-119.76605852666086, 33.95874176395354]]], [[[-119.47532570513232, 34.89983473016328], [-119.44302205829582, 34.89876042312422], [-119.44302205829582, 34.43143686113651], [-119.47532570513232, 34.37396143454722], [-119.56505805745596, 34.4147851020312], [-119.87732664354215, 34.405653492199264], [-120.00654123088816, 34.4599059976714], [-120.29368475832376, 34.47064906806192], [-120.47673875706394, 34.453460155437085], [-120.50904240390045, 34.52114149889737], [-120.64902487352529, 34.577005464928085], [-120.60595334440995, 34.71129384480962], [-120.64902487352529, 34.97503622289693], [-120.45879228659922, 34.9970595171975], [-120.2972740524167, 34.90842918647569], [-120.33316699334615, 34.99383659608034], [-120.21113099418602, 35.02338003965428], [-120.10345217139768, 35.11308467741514], [-119.74093346801024, 34.9723504552993], [-119.47532570513232, 34.89983473016328]]]]}}, {"county_fips": 6111, "Latitude": 34.23, "Longitude": -118.66, "Population": 640100.0, "q_0": 121698.14527261365, "q_0.05": 169686.85951413843, "q_0.1": 191681.3237447274, "q_0.15": 203184.20422121545, "q_0.2": 211634.31525074207, "q_0.25": 219282.68056084987, "q_0.3": 225135.8884236838, "q_0.35": 230636.9419700047, "q_0.4": 235326.64818903295, "q_0.45": 239940.06309482895, "q_0.5": 244821.53249101702, "q_0.55": 250374.4226214654, "q_0.6": 256234.94961099827, "q_0.65": 262883.1613154195, "q_0.7": 269111.66251210746, "q_0.75": 277167.93553819717, "q_0.8": 287666.05714419624, "q_0.85": 300217.55913208873, "q_0.9": 316442.4261531011, "q_0.95": 341626.7545181221, "q_1": 422713.9511560693, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-118.94769947346944, 34.045223480597244], [-119.2168965304403, 34.1451340352291], [-119.27432523592742, 34.26330780952485], [-119.47532570513232, 34.37396143454722], [-119.44302205829582, 34.43143686113651], [-119.44302205829582, 34.89876042312422], [-119.27791453002035, 34.87888574290176], [-119.24561088318386, 34.8138901670391], [-118.97641382621299, 34.81227870648052], [-118.88309217979642, 34.78810679810184], [-118.63184159329029, 34.2810338756692], [-118.67132382831268, 34.167694483049196], [-118.78977053337987, 34.16876879008825], [-118.94769947346944, 34.045223480597244]]]]}}, {"county_fips": 6037, "Latitude": 34.27, "Longitude": -118.27, "Population": 8673461.0, "q_0": 124105.87885539579, "q_0.05": 163517.27419645397, "q_0.1": 176803.21606992872, "q_0.15": 185295.27414386254, "q_0.2": 192192.17370745083, "q_0.25": 198179.38266685006, "q_0.3": 203531.6204714012, "q_0.35": 208572.66311603293, "q_0.4": 213557.77980135035, "q_0.45": 218648.40995682692, "q_0.5": 223601.84898894455, "q_0.55": 229005.13280657513, "q_0.6": 234260.19469337555, "q_0.65": 239870.1378043263, "q_0.7": 246123.77215368813, "q_0.75": 253187.4373882583, "q_0.8": 261646.00408538184, "q_0.85": 271949.45394583547, "q_0.9": 285781.80324834574, "q_0.95": 306783.4543846107, "q_1": 374835.04882122605, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-118.42725182999243, 32.80225023641384], [-118.49903771185133, 32.85220551372977], [-118.5923593582679, 33.03483771036864], [-118.36982312450532, 32.839313829261144], [-118.42725182999243, 32.80225023641384]]], [[[-118.32316230129703, 33.29911724197549], [-118.47032335910777, 33.32597491795179], [-118.54210924096667, 33.47476644286052], [-118.36623383041237, 33.40601079236118], [-118.32316230129703, 33.29911724197549]]], [[[-117.66991077638107, 34.823021776871045], [-117.66991077638107, 34.55927939878373], [-117.64837501182339, 34.287479717903516], [-117.73451807005407, 34.020514418699044], [-117.7847681873553, 33.94531292596539], [-117.97500077428138, 33.94531292596539], [-118.11857253799917, 33.744954663182156], [-118.11857253799917, 33.75140050541647], [-118.12934042027801, 33.75730919413125], [-118.12934042027801, 33.75301196597505], [-118.22266206669457, 33.765366496924145], [-118.2729121839958, 33.729377211115896], [-118.43084112408538, 33.77342379971704], [-118.39135888906299, 33.84110514317732], [-118.47032335910777, 33.97807929065648], [-118.54210924096667, 34.03770333132388], [-118.78259194519397, 34.0215887257381], [-118.94769947346944, 34.045223480597244], [-118.78977053337987, 34.16876879008825], [-118.67132382831268, 34.167694483049196], [-118.63184159329029, 34.2810338756692], [-118.88309217979642, 34.78810679810184], [-118.89386006207526, 34.81818739519531], [-117.66991077638107, 34.823021776871045]]]]}}, {"county_fips": 6065, "Latitude": 34.0, "Longitude": -117.35, "Population": 1165588.0, "q_0": 81610.22315089036, "q_0.05": 101944.7295957062, "q_0.1": 109599.92420992667, "q_0.15": 115097.59594728154, "q_0.2": 119215.77454469333, "q_0.25": 122575.66601577916, "q_0.3": 126333.80059094638, "q_0.35": 129670.3031139648, "q_0.4": 132997.96939913588, "q_0.45": 136621.24526934046, "q_0.5": 139746.53213742762, "q_0.55": 143872.85444428047, "q_0.6": 148246.5523718501, "q_0.65": 152884.69292837605, "q_0.7": 158406.10263317742, "q_0.75": 164774.09727107693, "q_0.8": 172070.12695532214, "q_0.85": 182751.3831748439, "q_0.9": 197599.58760145097, "q_0.95": 221430.65198921057, "q_1": 307449.341108522, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-114.62618938556383, 33.43662854297417], [-116.08703208139238, 33.4269597796227], [-117.03101642783687, 33.4269597796227], [-117.24278477932063, 33.431794161298434], [-117.37199936666664, 33.49195535548536], [-117.50839254219855, 33.50484703995399], [-117.41507089578198, 33.65578717894082], [-117.5371068949421, 33.71111399145201], [-117.673500070474, 33.870111433231735], [-117.55864265949978, 34.03286894964815], [-117.22842760294884, 34.00439981311326], [-116.93051619323442, 34.00439981311326], [-116.93051619323442, 34.034480410206726], [-115.31533385140924, 34.03770333132388], [-115.31533385140924, 34.08121276640549], [-114.4323675045448, 34.087658608639806], [-114.43595679863775, 34.02749741445288], [-114.53645703324021, 33.925438245742924], [-114.4969747982178, 33.696610846424804], [-114.52568915096137, 33.55104224263323], [-114.62618938556383, 33.43662854297417]]]}}, {"county_fips": 6059, "Latitude": 33.93, "Longitude": -117.98, "Population": 2324862.0, "q_0": 143690.64111504253, "q_0.05": 182352.43996232896, "q_0.1": 196059.38879899107, "q_0.15": 205451.65181569915, "q_0.2": 212471.1015562214, "q_0.25": 218154.07503155025, "q_0.3": 223587.91721095704, "q_0.35": 228584.6377105394, "q_0.4": 233529.2456856364, "q_0.45": 238241.59528565567, "q_0.5": 243130.54457705448, "q_0.55": 248036.25351902607, "q_0.6": 253151.82209713955, "q_0.65": 258833.78468294034, "q_0.7": 265204.97058569494, "q_0.75": 272608.11275669263, "q_0.8": 281227.16338690213, "q_0.85": 291849.6962763166, "q_0.9": 306999.76162946445, "q_0.95": 331687.4898293103, "q_1": 404433.4883601693, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-117.7847681873553, 33.94531292596539], [-117.673500070474, 33.870111433231735], [-117.5371068949421, 33.71111399145201], [-117.41507089578198, 33.65578717894082], [-117.50839254219855, 33.50484703995399], [-117.59453560042923, 33.38667326565824], [-117.88526842195776, 33.60583190162489], [-117.8888577160507, 33.60851766922252], [-117.92475065698015, 33.616574972015414], [-117.92475065698015, 33.614963511456835], [-118.11857253799917, 33.744954663182156], [-117.97500077428138, 33.94531292596539], [-117.7847681873553, 33.94531292596539]]]]}}, {"county_fips": 6073, "Latitude": 32.76, "Longitude": -117.18, "Population": 2393323.0, "q_0": 97466.20551676476, "q_0.05": 127405.8611541359, "q_0.1": 138352.5320886483, "q_0.15": 146381.2874346672, "q_0.2": 152561.48813954488, "q_0.25": 157486.467668593, "q_0.3": 161964.90680138033, "q_0.35": 166542.8498506052, "q_0.4": 171183.04103959224, "q_0.45": 175342.73722894903, "q_0.5": 179815.60979942948, "q_0.55": 184446.0492052264, "q_0.6": 189210.17737330063, "q_0.65": 194663.15807979114, "q_0.7": 200432.41679581068, "q_0.75": 207569.31165716035, "q_0.8": 216081.1810434279, "q_0.85": 228036.8068124528, "q_0.9": 242867.99499841855, "q_0.95": 266948.2117323905, "q_1": 340878.9520733307, "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[-116.08703208139238, 33.4269597796227], [-116.07985349320649, 33.075661377852626], [-116.10138925776417, 33.07458707081358], [-116.1049785518571, 32.618543732735915], [-117.12433807425344, 32.534210630170314], [-117.12433807425344, 32.67279623820805], [-117.23560619113474, 32.717379980328715], [-117.28226701434302, 32.843073903897825], [-117.24996336750652, 32.87422880803034], [-117.31098136708658, 33.0874787552822], [-117.50839254219855, 33.33564368130326], [-117.59453560042923, 33.38667326565824], [-117.50839254219855, 33.50484703995399], [-117.37199936666664, 33.49195535548536], [-117.24278477932063, 33.431794161298434], [-117.03101642783687, 33.4269597796227], [-116.08703208139238, 33.4269597796227]]]]}}, {"county_fips": 6025, "Latitude": 33.12, "Longitude": -115.52, "Population": 108633.0, "q_0": 49421.910008929146, "q_0.05": 58960.551581931824, "q_0.1": 63003.06536687747, "q_0.15": 65204.447037272286, "q_0.2": 67925.86396398884, "q_0.25": 70800.16454484365, "q_0.3": 73807.4607163569, "q_0.35": 76243.70168365046, "q_0.4": 78437.1108226782, "q_0.45": 80525.47043715998, "q_0.5": 82345.29332707373, "q_0.55": 84685.24117901559, "q_0.6": 87571.08687047214, "q_0.65": 90900.52847661392, "q_0.7": 94543.19819944215, "q_0.75": 98486.46935093388, "q_0.8": 103196.61907523496, "q_0.85": 110395.72174201207, "q_0.9": 120137.4476236503, "q_0.95": 137985.43862362264, "q_1": 197944.97697752985, "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[-114.51492126868254, 33.026243254056226], [-114.46467115138131, 32.913441014955744], [-114.52568915096137, 32.75659218725412], [-114.71951103198039, 32.71845428736777], [-116.1049785518571, 32.618543732735915], [-116.10138925776417, 33.07458707081358], [-116.07985349320649, 33.075661377852626], [-116.08703208139238, 33.4269597796227], [-114.62618938556383, 33.43662854297417], [-114.72668962016628, 33.4043993318026], [-114.73027891425923, 33.3055630842098], [-114.6728502087721, 33.22552720980041], [-114.70874314970156, 33.08909021584078], [-114.65849303240033, 33.03268909629054], [-114.51492126868254, 33.026243254056226]]]}}]}};
      var opt = {
        "mode": "vega-lite",
        "renderer": "canvas",
        "actions": {"editor": true, "source": true, "export": true}
      };
      vegaEmbed('#plot_qrf_huggingface_inference-rst-altair-plot-0', spec, opt).catch(console.err);
  });
</script>
</div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">altair</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">alt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn</span><span class="w"> </span><span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">RegressorMixin</span><span class="p">,</span> <span class="n">clone</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">KFold</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">skops</span><span class="w"> </span><span class="kn">import</span> <span class="n">hub_utils</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">vega_datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">data</span>

<span class="n">token</span> <span class="o">=</span> <span class="s2">&quot;&lt;Hugging Face Access Token&gt;&quot;</span>
<span class="n">repo_id</span> <span class="o">=</span> <span class="s2">&quot;quantile-forest/california-housing-example&quot;</span>
<span class="n">load_existing</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">random_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">quantiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CrossValidationPipeline</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">RegressorMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cross-validation pipeline for scikit-learn compatible models.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_model</span><span class="p">,</span> <span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_model</span> <span class="o">=</span> <span class="n">base_model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_splits</span> <span class="o">=</span> <span class="n">n_splits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">random_state</span> <span class="o">=</span> <span class="n">random_state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fold_models</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fold_indices</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fit the model using k-fold cross-validation.&quot;&quot;&quot;</span>
        <span class="n">kf</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_splits</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_state</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">fold_idx</span><span class="p">,</span> <span class="p">(</span><span class="n">train_idx</span><span class="p">,</span> <span class="n">test_idx</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kf</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">X</span><span class="p">)):</span>
            <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">train_idx</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">train_idx</span><span class="p">]</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">clone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model</span><span class="p">)</span>
            <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fold_models</span><span class="p">[</span><span class="n">fold_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fold_indices</span><span class="p">[</span><span class="n">fold_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_idx</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Predict using the appropriate k-fold model.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">quantiles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">quantiles</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quantiles</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">quantiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">quantiles</span><span class="p">]</span>
        <span class="n">y_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">quantiles</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">fold_idx</span><span class="p">,</span> <span class="n">test_idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fold_indices</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">fold_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fold_models</span><span class="p">[</span><span class="n">fold_idx</span><span class="p">]</span>
            <span class="n">y_pred</span><span class="p">[</span><span class="n">test_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fold_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">test_idx</span><span class="p">],</span> <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">y_pred</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">base_model</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>


<span class="k">def</span><span class="w"> </span><span class="nf">fit_and_upload_model</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">repo_id</span><span class="p">,</span> <span class="n">local_dir</span><span class="o">=</span><span class="s2">&quot;./local_repo&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function used to fit the model and upload it to Hugging Face Hub.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">mean_absolute_percentage_error</span><span class="p">,</span>
        <span class="n">mean_squared_error</span><span class="p">,</span>
        <span class="n">median_absolute_error</span><span class="p">,</span>
        <span class="n">r2_score</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">skops</span><span class="w"> </span><span class="kn">import</span> <span class="n">card</span>

    <span class="kn">import</span><span class="w"> </span><span class="nn">quantile_forest</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">quantile_forest</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestQuantileRegressor</span>

    <span class="c1"># Load the California Housing dataset.</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">fetch_california_housing</span><span class="p">(</span><span class="n">as_frame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Define the model pipeline.</span>
    <span class="n">qrf</span> <span class="o">=</span> <span class="n">RandomForestQuantileRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span>
        <span class="p">[(</span><span class="s2">&quot;cv_model&quot;</span><span class="p">,</span> <span class="n">CrossValidationPipeline</span><span class="p">(</span><span class="n">qrf</span><span class="p">,</span> <span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">))]</span>
    <span class="p">)</span>

    <span class="c1"># Fit the model pipeline.</span>
    <span class="n">pipeline</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="c1"># Save the pipeline (with all models) to a file.</span>
    <span class="n">model_filename</span> <span class="o">=</span> <span class="s2">&quot;model.pkl&quot;</span>
    <span class="n">pipeline</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&quot;cv_model&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_filename</span><span class="p">)</span>

    <span class="c1"># Prepare model repository.</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">local_dir</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">local_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">local_dir</span><span class="p">)</span>

    <span class="c1"># Initialize the repository.</span>
    <span class="n">hub_utils</span><span class="o">.</span><span class="n">init</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">model_filename</span><span class="p">,</span>
        <span class="n">requirements</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;quantile-forest=</span><span class="si">{</span><span class="n">quantile_forest</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">],</span>
        <span class="n">dst</span><span class="o">=</span><span class="n">local_dir</span><span class="p">,</span>
        <span class="n">task</span><span class="o">=</span><span class="s2">&quot;tabular-regression&quot;</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Create a model card.</span>
    <span class="n">model_card</span> <span class="o">=</span> <span class="n">card</span><span class="o">.</span><span class="n">Card</span><span class="p">(</span><span class="n">qrf</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">card</span><span class="o">.</span><span class="n">metadata_from_config</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">local_dir</span><span class="p">)))</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">library_name</span> <span class="o">=</span> <span class="s2">&quot;quantile-forest&quot;</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">license</span> <span class="o">=</span> <span class="s2">&quot;apache-2.0&quot;</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;quantile-forest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sklearn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;skops&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tabular-regression&quot;</span><span class="p">,</span>
        <span class="s2">&quot;quantile-regression&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uncertainty-estimation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prediction-intervals&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">model_description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;This is a RandomForestQuantileRegressor trained on the California Housing dataset.&quot;</span>
    <span class="p">)</span>
    <span class="n">limitations</span> <span class="o">=</span> <span class="s2">&quot;This model is not ready to be used in production.&quot;</span>
    <span class="n">training_procedure</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The model was trained using default parameters on a 5-fold cross-validation pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">get_started_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;details&gt;</span>
<span class="s2">&lt;summary&gt; Click to expand &lt;/summary&gt;</span>

<span class="s2">```python</span>
<span class="s2">from examples.plot_qrf_huggingface_inference import CrossValidationPipeline</span>
<span class="s2">pipeline = CrossValidationPipeline.load(qrf_pkl_filename)</span>
<span class="s2">```</span>

<span class="s2">&lt;/details&gt;&quot;&quot;&quot;</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;Model description&quot;</span><span class="p">:</span> <span class="n">model_description</span><span class="p">,</span>
            <span class="s2">&quot;Model description/Intended uses &amp; limitations&quot;</span><span class="p">:</span> <span class="n">limitations</span><span class="p">,</span>
            <span class="s2">&quot;Model description/Training Procedure&quot;</span><span class="p">:</span> <span class="n">training_procedure</span><span class="p">,</span>
            <span class="s2">&quot;How to Get Started with the Model&quot;</span><span class="p">:</span> <span class="n">get_started_code</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># Add performance metrics to the model card.</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">mape</span> <span class="o">=</span> <span class="n">mean_absolute_percentage_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">mdae</span> <span class="o">=</span> <span class="n">median_absolute_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">add_metrics</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;Mean Absolute Percentage Error&quot;</span><span class="p">:</span> <span class="n">mape</span><span class="p">,</span>
            <span class="s2">&quot;Median Absolute Error&quot;</span><span class="p">:</span> <span class="n">mdae</span><span class="p">,</span>
            <span class="s2">&quot;Mean Squared Error&quot;</span><span class="p">:</span> <span class="n">mse</span><span class="p">,</span>
            <span class="s2">&quot;R-Squared&quot;</span><span class="p">:</span> <span class="n">r2</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># Save the model card locally.</span>
    <span class="n">model_card</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">local_dir</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;README.md&quot;</span><span class="p">)</span>

    <span class="c1"># Create the repository on the Hugging Face Hub if it does not exist.</span>
    <span class="c1"># Push the model to the repository.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">hub_utils</span><span class="o">.</span><span class="n">push</span><span class="p">(</span>
            <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">local_dir</span><span class="p">,</span>
            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>  <span class="c1"># personal token to be downloaded from Hugging Face</span>
            <span class="n">commit_message</span><span class="o">=</span><span class="s2">&quot;Model commit&quot;</span><span class="p">,</span>
            <span class="n">create_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error pushing model to Hugging Face Hub: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">model_filename</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">local_dir</span><span class="p">)</span>


<span class="k">if</span> <span class="ow">not</span> <span class="n">load_existing</span><span class="p">:</span>
    <span class="n">fit_and_upload_model</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">repo_id</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>

<span class="c1"># Download the repository locally and load the fitted model.</span>
<span class="n">model_filename</span> <span class="o">=</span> <span class="s2">&quot;model.pkl&quot;</span>
<span class="n">local_dir</span> <span class="o">=</span> <span class="s2">&quot;./local_repo&quot;</span>
<span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">local_dir</span><span class="p">:</span>
    <span class="n">hub_utils</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="n">local_dir</span><span class="p">)</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">CrossValidationPipeline</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">local_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">model_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Fetch the California Housing dataset and estimate quantiles.</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">fetch_california_housing</span><span class="p">(</span><span class="n">as_frame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100_000</span>  <span class="c1"># predict in dollars</span>

<span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">quantiles</span><span class="p">)</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">q</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">})</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">X</span><span class="p">[[</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Longitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Population&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
<span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">plot_quantiles_by_latlon</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">quantiles</span><span class="p">,</span> <span class="n">color_scheme</span><span class="o">=</span><span class="s2">&quot;lightgreyred&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot quantile predictions on California Housing dataset by lat/lon.&quot;&quot;&quot;</span>
    <span class="c1"># Slider for varying the displayed quantile estimates.</span>
    <span class="n">slider</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">binding_range</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Predicted Quantile: &quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.5</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">quantile_val</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;quantile&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">slider</span><span class="p">)</span>

    <span class="c1"># Load the US counties data and filter to California counties.</span>
    <span class="n">ca_counties</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">us_10m</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;counties&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;county_fips&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)})</span>
        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;(county_fips &gt;= 6000) &amp; (county_fips &lt; 7000)&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">x_min</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">]]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">x_max</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">]]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Longitude&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Latitude&quot;</span><span class="p">]),</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">ca_counties</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;index_left0&quot;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;w_q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">grouped</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;county_fips&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;w_q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">},</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;Population&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span><span class="p">}})</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;w_q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;county_fips&quot;</span><span class="p">,</span> <span class="s2">&quot;Latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Longitude&quot;</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">]]</span>
        <span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;county_fips&quot;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">merge</span><span class="p">(</span>
            <span class="n">grouped</span><span class="p">[[</span><span class="s2">&quot;county_fips&quot;</span><span class="p">,</span> <span class="s2">&quot;Population&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;q_</span><span class="si">{</span><span class="n">q</span><span class="si">:</span><span class="s2">.3g</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quantiles</span><span class="p">]],</span>
            <span class="n">on</span><span class="o">=</span><span class="s2">&quot;county_fips&quot;</span><span class="p">,</span>
            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">chart</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="o">.</span><span class="n">add_params</span><span class="p">(</span><span class="n">quantile_val</span><span class="p">)</span>
        <span class="o">.</span><span class="n">transform_calculate</span><span class="p">(</span><span class="n">quantile_col</span><span class="o">=</span><span class="s2">&quot;&#39;q_&#39; + quantile&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">transform_calculate</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;datum[datum.quantile_col]&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">mark_geoshape</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">strokeWidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span>
                <span class="s2">&quot;value:Q&quot;</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">],</span> <span class="n">scheme</span><span class="o">=</span><span class="n">color_scheme</span><span class="p">),</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Prediction&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span>
                <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;county_fips:N&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;County FIPS&quot;</span><span class="p">),</span>
                <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;Population:N&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;,.0f&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Population&quot;</span><span class="p">),</span>
                <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;value:Q&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;$,.0f&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Predicted Value&quot;</span><span class="p">),</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;mercator&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Quantile Predictions on the California Housing Dataset by County&quot;</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">chart</span>


<span class="n">chart</span> <span class="o">=</span> <span class="n">plot_quantiles_by_latlon</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">quantiles</span><span class="p">)</span>
<span class="n">chart</span>
</pre></div>
</div>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2022-2025, Zillow Group.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>